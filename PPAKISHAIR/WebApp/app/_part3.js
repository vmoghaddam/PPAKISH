"use strict";app.controller("rosterDailyController",["$scope","$location","$routeParams","$rootScope","$q","flightService","aircraftService","authService","notificationService","$route","$http",function(e,t,i,a,n,o,l,r,s,d,u){e.prms=i.prms,r.isAuthorized()?(a.page_title="> Daily Roster",$(".dailyroster").fadeIn(400,function(){})):r.redirectToLogin(),e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.btn_search={text:"Search",type:"success",icon:"search",width:120,validationGroup:"crewreportsearch",bindingOptions:{},onClick:function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");e.dg_ds=null,e.bind()}},e.btn_notify={text:"Notify",type:"default",width:120,bindingOptions:{},onClick:function(t){e.dg_selected=a.getSelectedRows(e.dg_instance);var i=Enumerable.From(e.dg_selected).Select("$.Id").ToArray();if(0!=i.length){var n=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss"),l={Day:n,Ids:i.join("_"),Test:0};e.loadingVisible=!0,o.notifyDailyRoster(l).then(function(t){e.loadingVisible=!1},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})}}},e.IsPickupVisible=a.HasMenuAccess("notify_pickup",3),e.btn_notifypickup={text:"Notify PickUp Time",type:"default",width:250,bindingOptions:{visible:"IsPickupVisible"},onClick:function(t){e.Notify.Message=null,e.popup_notify_visible=!0}},e.btn_notifytest={text:"Notify Test",type:"danger",width:200,bindingOptions:{},onClick:function(t){e.dg_selected=a.getSelectedRows(e.dg_instance);var i=Enumerable.From(e.dg_selected).Select("$.Id").ToArray();if(0!=i.length){var n=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss"),l={Day:n,Ids:i.join("_"),Test:1};e.loadingVisible=!0,o.notifyDailyRoster(l).then(function(t){e.loadingVisible=!1},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})}}},e.dt_from=new Date,e.dt_to=(new Date).addDays(7),e.date_from={type:"date",placeholder:"From",width:"100%",bindingOptions:{value:"dt_from"}},e.dg_selected=null,e.dg_columns=[{dataField:"JobGroup",caption:"Group",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,width:200,fixed:!1,fixedPosition:"left"},{dataField:"Name",caption:"Name",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}],e.dg_height=100,e.dg_instance=null,e.dg_ds=null,e.dg={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",columnFixing:{enabled:!0},allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"multiple"},columnAutoWidth:!1,columns:e.dg_columns,onContentReady:function(t){e.dg_instance||(e.dg_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];i?e.bindLegs(i.Id):(e.dg_selected=null,e.dg_leg_ds=null)},height:$(window).height()-155,bindingOptions:{dataSource:"dg_ds"}},e.dg_leg_columns=[{dataField:"IsPositioning",caption:"DH",allowResizing:!0,alignment:"center",dataType:"boolean",allowEditing:!1,width:100},{dataField:"DepartureLocal",caption:"Date",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:130,alignment:"center",format:"yyyy-MMM-dd"},{dataField:"FlightNumber",caption:"Flight No",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1},{dataField:"FromAirportIATA",caption:"From",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100},{dataField:"ToAirportIATA",caption:"To",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100},{dataField:"DepartureLocal",caption:"Departure",allowResizing:!0,dataType:"datetime",allowEditing:!1,alignment:"center",format:"HH:mm"},{dataField:"ArrivalLocal",caption:"Arrival",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:130,format:"HH:mm"}],e.dg_leg_selected=null,e.dg_leg_instance=null,e.dg_leg_ds=null,e.dg_leg_height=null,e.dg_leg={grouping:{autoExpandAll:!0,allowCollapsing:!0},headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",columnFixing:{enabled:!0},allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_leg_columns,onContentReady:function(t){e.dg_leg_instance||(e.dg_leg_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_leg_selected=i||null},height:"100%",bindingOptions:{dataSource:"dg_leg_ds"}},e.bind=function(){var t=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss");e.loadingVisible=!0,o.getDailyRosterCrew(t).then(function(t){e.loadingVisible=!1,e.dg_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.bindLegs=function(t){var i=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss");e.loadingVisible=!0,o.getDailyRosterFlights(i,t).then(function(t){e.loadingVisible=!1,e.dg_leg_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.Notify={ModuleId:3,TypeId:10023,SMS:!0,Email:!0,App:!0,Message:null,CustomerId:Config.CustomerId,SenderId:null,Employees:[],Names:[]},e.txt_MessageNotify={hoverStateEnabled:!1,height:422,bindingOptions:{value:"Notify.Message"}},e.dg_emp_columns=[{dataField:"JobGroup",caption:"Group",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:200},{dataField:"Name",caption:"Name",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"Mobile",caption:"Monile",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150}],e.dg_emp_selected=null,e.dg_emp_instance=null,e.dg_emp_ds=null,e.selectedEmps=null,e.recs=[],e.bindRecs=function(){e.recs=Enumerable.From(e.dg_emp_ds).Where(function(t){return-1!=e.selectedEmps.indexOf(t.Id)}).OrderBy("$.Name").ToArray()},e.dg_emp={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"multiple"},columnAutoWidth:!1,height:510,columns:e.dg_emp_columns,onContentReady:function(t){e.dg_emp_instance||(e.dg_emp_instance=t.component)},onRowPrepared:function(e){},keyExpr:"Id",onSelectionChanged:function(t){e.bindRecs()},bindingOptions:{dataSource:"dg_emp_ds",selectedRowKeys:"selectedEmps"}};var c=function(){var e=n.defer();return u.get(a.serviceUrl+"odata/employees/light/"+Config.CustomerId).then(function(t){e.resolve(t.data)},function(t,i){e.reject(Exceptions.getMessage(t))}),e.promise};e.bindEmployees=function(){e.dg_selected=a.getSelectedRows(e.dg_instance),e.dg_emp_ds?e.selectedEmps=Enumerable.From(e.dg_selected).Select("$.Id").ToArray():(e.loadingVisible=!0,c().then(function(t){e.loadingVisible=!1,e.dg_emp_ds=t,e.selectedEmps=Enumerable.From(e.dg_selected).Select("$.Id").ToArray()},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")}))},e.dsNotificationType=[{Id:10023,Title:"Pickup Notification"},{Id:10025,Title:"Training Notification"},{Id:10022,Title:"Career Notification"}],e.selectedNotificationTypeId=10023,e.sb_notification={dataSource:e.dsNotificationType,showClearButton:!1,searchEnabled:!1,readOnly:!0,searchExpr:["Title"],valueExpr:"Id",displayExpr:"Title",bindingOptions:{value:"selectedNotificationTypeId"}},e.popup_notify_visible=!1,e.popup_notify_title="Notify",e.popup_notify={fullScreen:!1,showTitle:!0,height:800,width:1200,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"success",text:"Send",icon:"check",validationGroup:"notmessage",onClick:function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");e.Notify.ObjectId=-1,e.Notify.Message=e.Notify.Message.replace(/\r?\n/g,"<br />");var i=Enumerable.From(e.recs).Select("{EmployeeId:$.Id,Name:$.Name}").ToArray();$.each(i,function(t,i){e.Notify.Employees.push(i.EmployeeId),e.Notify.Names.push(i.Name)}),console.log(e.Notify),e.Notify.TypeId=e.selectedNotificationTypeId,e.loadingVisible=!0,s.notify2(e.Notify).then(function(t){e.loadingVisible=!1,General.ShowNotify(Config.Text_SavedOk,"success"),e.Notify={ModuleId:a.moduleId,TypeId:10023,SMS:!0,Email:!0,App:!0,Message:null,CustomerId:Config.CustomerId,SenderId:null,Employees:[],Names:[]},e.popup_notify_visible=!1},function(t){e.loadingVisible=!1,e.popup_notify_visible=!1,General.ShowNotify(t.message,"error")})}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove",onClick:function(t){e.popup_notify_visible=!1}},toolbar:"bottom"}],visible:!1,dragEnabled:!1,closeOnOutsideClick:!1,onShowing:function(e){},onShown:function(t){e.bindEmployees()},onHiding:function(){e.dg_emp_instance.clearSelection(),e.Notify={ModuleId:a.moduleId,TypeId:97,SMS:!0,Email:!0,App:!0,Message:null,CustomerId:Config.CustomerId,SenderId:null,Employees:[],Names:[]},e.popup_notify_visible=!1},bindingOptions:{visible:"popup_notify_visible",title:"popup_notify_title"}},e.$on("$viewContentLoaded",function(){setTimeout(function(){e.dg_ds=null,e.bind()},500)})}]),app.controller("refreshController",["$scope","$location","authService",function(e,t,i){e.authentication=i.authentication,e.tokenRefreshed=!1,e.tokenResponse=null,e.refreshToken=function(){i.refreshToken().then(function(t){e.tokenRefreshed=!0,e.tokenResponse=t},function(e){t.path("/login")})}}]),app.controller("tokensManagerController",["$scope","tokensManagerService",function(e,t){e.refreshTokens=[],t.getRefreshTokens().then(function(t){e.refreshTokens=t.data},function(e){alert(e.data.message)}),e.deleteRefreshTokens=function(i,a){a=window.encodeURIComponent(a),t.deleteRefreshTokens(a).then(function(t){e.refreshTokens.splice(i,1)},function(e){alert(e.data.message)})}}]),app.controller("usersController",["$scope","$location","$routeParams","$rootScope","flightService","aircraftService","authService","notificationService","$route",function(e,t,i,a,n,o,l,r,s){e.prms=i.prms,e.btn_search={text:"Search",type:"success",icon:"search",width:120,validationGroup:"ctrsearch",bindingOptions:{},onClick:function(t){e.dg_flight_total_ds=null,e.dg_flight_ds=null,e.getUsers()}},e.dto={UserName:"",FirstName:"",LastName:"",Email:"",Password:""},e.btn_new={text:"New",type:"default",icon:"plus",width:120,onClick:function(t){e.IsEdit=!1,e.IsDisabled=!1,e.dto={UserName:"",FirstName:"",LastName:"",Email:"",Password:"1234@aA",Roles:null},e.popup_add_visible=!0}},e.IsEdit=!1,e.btn_edit={text:"Edit",type:"default",icon:"edit",width:120,onClick:function(t){var i=a.getSelectedRow(e.dg_flight_total_instance);if(!i)return void General.ShowNotify(Config.Text_NoRowSelected,"error");e.IsEdit=!0,e.IsDisabled=i.PersonId,e.dto={Id:i.Id,UserName:i.UserName,FirstName:i.FirstName,LastName:i.LastName,Email:i.Email,Password:i.PasswordHash,Roles:null},e.getUserRoles(i.Id,function(t){e.dto.Roles=Enumerable.From(t).Select("$.Name").ToArray(),e.popup_add_visible=!0})}},e.selected=null,e.btn_password={text:"Password",type:"default",icon:"key",width:150,onClick:function(t){if(e.selected=a.getSelectedRow(e.dg_flight_total_instance),!e.selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");e.popup_password_visible=!0}},e.btn_role={text:"Roles",type:"default",icon:"key",width:130,onClick:function(t){e.popup_role_visible=!0}},e.btn_delete={text:"Delete",type:"danger",icon:"clear",width:120,onClick:function(t){var i=a.getSelectedRow(e.dg_flight_total_instance);if(!i)return void General.ShowNotify(Config.Text_NoRowSelected,"error");General.Confirm(Config.Text_DeleteConfirm,function(t){if(t){var a={Id:i.Id};e.loadingVisible=!0,l.deleteUser(a).then(function(t){e.loadingVisible=!1,General.ShowNotify(Config.Text_SavedOk,"success"),e.dg_flight_total_ds=null,e.dg_flight_ds=null,e.getUsers()},function(t){e.loadingVisible=!1,General.ShowNotify2(t.message,"error",5e3)})}})}},e.formatMinutes=function(e){return pad(Math.floor(e/60)).toString()+":"+pad(e%60).toString()},e.getUsers=function(){e.loadingVisible=!0,l.getUsers().then(function(t){e.loadingVisible=!1,e.dg_flight_total_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.roles=null,e.userRoles=null,e.getRoles=function(){e.loadingVisible=!0,l.getRoles().then(function(t){e.loadingVisible=!1,e.roles=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getUserRoles=function(t,i){e.loadingVisible=!0,l.getUserRoles(t).then(function(t){e.loadingVisible=!1,i(t)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getClaims=function(t){e.loadingVisible=!0,l.getClaims().then(function(i){e.loadingVisible=!1,t(i)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getRoleClaims=function(t,i){e.loadingVisible=!0,l.getRoleClaims(t).then(function(t){e.loadingVisible=!1,i(t)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getUserClaims=function(t,i){e.loadingVisible=!0,l.getUserClaims(t).then(function(t){e.loadingVisible=!1,i(t)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.fillUserRoles=function(t){e.getUserRoles(t,function(i){var a=[];$.each(e.roles,function(e,n){var o={Id:n.Id,Name2:n.Name2,Selected:0,Name:n.Name,userId:t};Enumerable.From(i).Where("$.RoleId=='"+n.Id+"'").FirstOrDefault()&&(o.Selected=1),a.push(o)}),a=Enumerable.From(a).OrderBy("$.Name2").ToArray(),e.dg_flight_ds=a,e.getUserClaims(t,function(t){t=Enumerable.From(t).OrderBy("$.Name").ToArray(),e.dg_claims_ds=t})})},e.getCrewFlights=function(t,i,a){e.dg_flight_ds=null;var o=-1*(new Date).getTimezoneOffset();e.loadingVisible=!0,n.getCrewFlights(t,i,a).then(function(t){console.log(t),e.loadingVisible=!1,$.each(t,function(t,i){i.Route=i.FromAirportIATA+"-"+i.ToAirportIATA,i.STA=new Date(i.STA).addMinutes(o),i.STD=new Date(i.STD).addMinutes(o),i.ChocksIn&&(i.ChocksIn=new Date(i.ChocksIn).addMinutes(o)),i.ChocksOut&&(i.ChocksOut=new Date(i.ChocksOut).addMinutes(o)),i.Takeoff&&(i.Takeoff=new Date(i.Takeoff).addMinutes(o)),i.Landing&&(i.Landing=new Date(i.Landing).addMinutes(o)),i.DurationH=Math.floor(i.FlightTime/60),i.DurationM=i.FlightTime%60;var a=60*i.FlightH+i.FlightM;i.FlightTime2=pad(Math.floor(a/60)).toString()+":"+pad(a%60).toString(),i.ScheduledFlightTime2=e.formatMinutes(i.ScheduledFlightTime);i.ActualFlightHOffBlock,i.ActualFlightMOffBlock;i.BlockTime2=e.formatMinutes(i.BlockTime),i.SITATime2=e.formatMinutes(i.SITATime),i.FixTime2=e.formatMinutes(i.FixTime),i.Duty2=pad(Math.floor(i.Duty/60)).toString()+":"+pad(i.Duty%60).toString()}),e.dg_flight_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.nameChanged=function(){if(!e.IsEdit)return e.dto.FirstName||e.dto.LastName?void(e.dto.UserName=e.dto.FirstName.replace(/\s/g,"").substr(0,1)+"."+e.dto.LastName.replace(/\s/g,"")):void(e.dto.UserName="")},e.IsDisabled=!1,e.txt_FirstName={hoverStateEnabled:!1,valueChangeEvent:"keyup",onValueChanged:function(t){e.nameChanged()},bindingOptions:{value:"dto.FirstName",readOnly:"IsDisabled"}},e.txt_LastName={hoverStateEnabled:!1,valueChangeEvent:"keyup",onValueChanged:function(t){e.nameChanged()},bindingOptions:{value:"dto.LastName",readOnly:"IsDisabled"}},e.txt_Email={mode:"email",hoverStateEnabled:!1,bindingOptions:{value:"dto.Email"}},e.txt_UserName={hoverStateEnabled:!1,bindingOptions:{value:"dto.UserName"}},e.txt_Password={hoverStateEnabled:!1,bindingOptions:{value:"dto.Password"}},e.newPassword="",e.txt_newPassword={hoverStateEnabled:!1,bindingOptions:{value:"newPassword"}},e.tag_roles={displayExpr:"Name2",valueExpr:"Name",hideSelectedItems:!0,searchEnabled:!0,bindingOptions:{dataSource:"roles",value:"dto.Roles"}},e.popup_add_visible=!1,e.popup_add_title="New",e.popup_instance=null,e.popup_add={fullScreen:!1,showTitle:!0,width:500,height:440,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"success",text:"Save",icon:"check",validationGroup:"useradd",bindingOptions:{}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,dragEnabled:!0,closeOnOutsideClick:!1,onShowing:function(e){},onShown:function(e){},onHiding:function(){e.dg_flight_total_ds=null,e.dg_flight_ds=null,e.getUsers(),e.popup_add_visible=!1},onContentReady:function(t){e.popup_instance||(e.popup_instance=t.component)},bindingOptions:{visible:"popup_add_visible"}},e.popup_add.toolbarItems[1].options.onClick=function(t){e.popup_add_visible=!1},e.popup_add.toolbarItems[0].options.onClick=function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");e.dto.Email=e.dto.FirstName.replace(/\s/g,"")+"."+e.dto.LastName.replace(/\s/g,"")+"@airpocket.ir",e.loadingVisible=!0,e.IsEdit?l.updateUser(e.dto).then(function(t){e.loadingVisible=!1,e.dto={Id:null,UserName:"",FirstName:"",LastName:"",Email:"",Password:"1234@aA",Roles:null},e.popup_add_visible=!1},function(t){e.loadingVisible=!1,e.message=t.message,General.ShowNotify(t.message,"error")}):l.register2(e.dto).then(function(t){e.loadingVisible=!1,e.dto={Id:null,UserName:"",FirstName:"",LastName:"",Email:"",Password:"1234@aA",Roles:null},console.log(t)},function(t){e.loadingVisible=!1,e.message=t.message,General.ShowNotify(t.message,"error")})},e.popup_password_visible=!1,e.popup_password_title="Password",e.popup_password={fullScreen:!1,showTitle:!0,width:400,height:200,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"success",text:"Save",icon:"check",validationGroup:"password",bindingOptions:{}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,dragEnabled:!0,closeOnOutsideClick:!1,onShowing:function(e){},onShown:function(e){},onHiding:function(){e.popup_password_visible=!1},onContentReady:function(e){},bindingOptions:{visible:"popup_password_visible"}},e.popup_password.toolbarItems[1].options.onClick=function(t){e.popup_password_visible=!1},e.popup_password.toolbarItems[0].options.onClick=function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");var i={Id:e.selected.Id,Password:e.newPassword};e.loadingVisible=!0,l.setPassword(i).then(function(t){e.loadingVisible=!1,e.newPassword="",e.popup_password_visible=!1},function(t){e.loadingVisible=!1,e.message=t.message,General.ShowNotify(t.message,"error")})},e.popup_role_visible=!1,e.popup_role_title="Roles",e.popup_role={fullScreen:!1,showTitle:!0,width:900,height:600,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,dragEnabled:!0,closeOnOutsideClick:!1,onShowing:function(e){},onShown:function(t){e.dg_role_instance.repaint(),e.dg_rc_instance.repaint()},onHiding:function(){e.popup_role_visible=!1},onContentReady:function(e){},bindingOptions:{visible:"popup_role_visible"}},e.popup_role.toolbarItems[0].options.onClick=function(t){e.popup_role_visible=!1},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.dg_flight_total_columns=[{dataField:"UserName",caption:"UserName",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"FirstName",caption:"First Name",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"LastName",caption:"Last Name",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}],e.dg_flight_total_selected=null,e.dg_flight_total_instance=null,e.dg_flight_total_ds=null,e.dg_flight_total={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-140,columns:e.dg_flight_total_columns,onContentReady:function(t){e.dg_flight_total_instance||(e.dg_flight_total_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];i?(e.dg_flight_total_selected=i,e.fillUserRoles(i.Id)):(e.dg_flight_ds=null,e.dg_flight_total_selected=null)},summary:{totalItems:[{name:"FlightTimeTotal",showInColumn:"FlightTime2",displayFormat:"{0}",summaryType:"custom"},{name:"SITATimeTotal",showInColumn:"SITATime2",displayFormat:"{0}",summaryType:"custom"},{name:"FixTimeTotal",showInColumn:"FixTime2",displayFormat:"{0}",summaryType:"custom"}],calculateCustomSummary:function(e){"FlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FixTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FixTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()))}},export:{enabled:!1,fileName:"CREW_TOTAL_TIMES",allowExportSelectedData:!1},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"before",template:function(){return $("<div/>").append("<span style='color:white;'>Users</span>")}})},onExporting:function(e){e.component.beginUpdate(),e.component.columnOption("row","visible",!1)},onExported:function(e){e.component.columnOption("row","visible",!0),e.component.endUpdate()},onRowPrepared:function(e){"data"===e.rowType&&e.data.PersonId&&e.rowElement.css("backgroundColor","#b3ffcc")},bindingOptions:{dataSource:"dg_flight_total_ds"}},e.dg_flight_columns=[{dataField:"Selected",caption:"",allowResizing:!0,alignment:"center",dataType:"boolean",allowEditing:!1,fixed:!1,fixedPosition:"left",width:90},{dataField:"Name2",caption:"Title",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}],e.dg_flight_selected=null,e.dg_flight_instance=null,e.dg_flight_ds=null,e.dg_flight={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-140,columns:e.dg_flight_columns,onContentReady:function(t){e.dg_flight_instance||(e.dg_flight_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_flight_selected=i||null},onCellClick:function(t){if("data"==t.rowType&&"Selected"==t.column.dataField){var i=(t.value,0==t.value?1:0),a={userId:t.data.userId,role:t.data.Name};1==i?(e.loadingVisible=!0,l.addUserRole(a).then(function(a){e.loadingVisible=!1,t.data.Selected=i},function(t){e.loadingVisible=!1,e.message=t.message,General.ShowNotify(t.message,"error")})):(e.loadingVisible=!0,l.removeUserRole(a).then(function(a){e.loadingVisible=!1,t.data.Selected=i},function(t){e.loadingVisible=!1,e.message=t.message,General.ShowNotify(t.message,"error")}))}},summary:{totalItems:[{name:"BlockTimeTotal",showInColumn:"BlockTime2",displayFormat:"{0}",summaryType:"custom"},{name:"FlightTimeTotal",showInColumn:"ScheduledFlightTime2",displayFormat:"{0}",summaryType:"custom"},{name:"SITATimeTotal",showInColumn:"SITATime2",displayFormat:"{0}",summaryType:"custom"},{name:"FixTimeTotal",showInColumn:"FixTime2",displayFormat:"{0}",summaryType:"custom"}],calculateCustomSummary:function(e){"FlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.ScheduledFlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FixTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FixTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"BlockTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.BlockTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()))}},export:{enabled:!1,fileName:"CREW_TIMES",allowExportSelectedData:!1},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"before",template:function(){return $("<div/>").append("<span style='color:white;'>User Roles</span>")}})},onExporting:function(e){e.component.beginUpdate(),e.component.columnOption("row","visible",!1)},onExported:function(e){e.component.columnOption("row","visible",!0),e.component.endUpdate()},onRowPrepared:function(e){e.data&&e.data.IsPositioning&&e.rowElement.css("background","#ffccff")},bindingOptions:{dataSource:"dg_flight_ds"}},e.dg_claims_columns=[{caption:"User Access",columns:[{dataField:"Name",caption:"Role",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"ClaimValue",caption:"Module",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"Claim",caption:"Access",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}]}],e.dg_claims_selected=null,e.dg_claims_instance=null,e.dg_claims_ds=null,e.dg_claims={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-140,columns:e.dg_claims_columns,onContentReady:function(t){e.dg_claims_instance||(e.dg_claims_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_claims_selected=i||null},export:{enabled:!1,fileName:"CREW_TIMES",allowExportSelectedData:!1},onExporting:function(e){e.component.beginUpdate(),e.component.columnOption("row","visible",!1)},onExported:function(e){e.component.columnOption("row","visible",!0),e.component.endUpdate()},onRowPrepared:function(e){e.data&&e.data.IsPositioning&&e.rowElement.css("background","#ffccff")},bindingOptions:{dataSource:"dg_claims_ds"}},e.dg_rc_columns=[{caption:"Role Access",columns:[{dataField:"ClaimValue",caption:"Module",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"},{dataField:"Claim",caption:"Access",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}]}],e.dg_rc_selected=null,e.dg_rc_instance=null,e.dg_rc_ds=null,e.dg_rc={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:480,columns:e.dg_rc_columns,onContentReady:function(t){e.dg_rc_instance||(e.dg_rc_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_rc_selected=i||null},bindingOptions:{dataSource:"dg_rc_ds"}},e.dg_role_columns=[{dataField:"Name",caption:"Role",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,fixed:!1,fixedPosition:"left"}],e.dg_role_selected=null,e.dg_role_instance=null,e.dg_role_ds=null,e.dg_role={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:480,columns:e.dg_role_columns,onContentReady:function(t){e.dg_role_instance||(e.dg_role_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];i?(e.dg_role_selected=i,e.getRoleClaims(i.Id,function(t){e.dg_rc_ds=t})):(e.dg_role_selected=null,e.dg_rc_ds=null)},bindingOptions:{dataSource:"roles"}},l.isAuthorized()?"razbani"!=a.userName.toLowerCase()&&"demo"!=a.userName.toLowerCase()?a.navigatehome():(a.page_title="> Users",$(".users").fadeIn(400,function(){e.getRoles()})):l.redirectToLogin(),e.$on("$viewContentLoaded",function(){}),a.$broadcast("CrewTimeReportLoaded",null)}]),app.controller("reportFlightsController",["$scope","$location","$routeParams","$rootScope","flightService","aircraftService","authService","notificationService","$route",function(e,t,i,a,n,o,l,r,s){e.prms=i.prms;var d=!1;"ashrafi"==a.userName.toLowerCase()&&(d=!0),e.btn_search={text:"Search",type:"success",icon:"search",width:120,bindingOptions:{},onClick:function(t){e.dg_flight_ds=null,e.doRefresh=!0,e.bind()}},e.bind=function(){var t=[];if(e.dt_to){var i=moment(e.dt_to).format("YYYY-MM-DDTHH:mm:ss");t.push("dt="+i)}if(e.dt_from){var n=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss");t.push("df="+n)}t.push("status="+(e.fstatus?e.fstatus:"null")),t.push("ip="+(e.ip?e.ip:"null")),t.push("cpt="+(e.cpt?e.cpt:"null"));var o=t.join("&"),l="odata/report/flights";o&&(l+="?"+o),e.dg_flight_ds||(e.dg_flight_ds={store:{type:"odata",url:a.serviceUrl+l,key:"ID",version:4,onLoaded:function(t){$.each(t,function(t,i){var a=new Date(i.STDDay);persianDate.toLocale("en"),i.STDDayPersian=new persianDate(a).format("DD-MM-YYYY"),i.FlightTime2=e.formatMinutes(i.FlightTime),i.SITATime2=e.formatMinutes(i.SITATime),i.FlightTimeActual2=e.formatMinutes(i.FlightTimeActual),i.BlockTime2=e.formatMinutes(i.BlockTime),i.TaxiTO=subtractDates(i.Takeoff,i.ChocksOut),i.TaxiLND=subtractDates(i.ChocksIn,i.Landing),i.TaxiTO2=e.formatMinutes(i.TaxiTO),i.TaxiLND2=e.formatMinutes(i.TaxiLND)}),a.$broadcast("OnDataLoaded",null)},beforeSend:function(t){e.dsUrl=General.getDsUrl(t),a.$broadcast("OnDataLoading",null)}}}),e.doRefresh&&(e.doRefresh=!1,e.dg_flight_instance.refresh())},e.dt_to=(new Date).addDays(0),e.dt_from=(new Date).addDays(-30);var u=new Date(2019,10,30);u>e.dt_from&&(e.dt_from=u),e.date_from={type:"date",placeholder:"From",width:"100%",bindingOptions:{value:"dt_from"}},e.date_to={type:"date",placeholder:"To",width:"100%",bindingOptions:{value:"dt_to"}},e.formatMinutes=function(e){return pad(Math.floor(e/60)).toString()+":"+pad(e%60).toString()},e.getCrewFlightsTotal=function(t,i){e.loadingVisible=!0,n.getCrewFlightsTotal(t,i).then(function(t){e.loadingVisible=!1,$.each(t,function(t,i){i.FlightTime2=e.formatMinutes(i.FlightTime),i.FixTime2=e.formatMinutes(i.FixTime),
i.BlockTime2=e.formatMinutes(i.BlockTime),i.SITATime2=e.formatMinutes(i.SITATime)}),e.dg_flight_total_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getCrewFlights=function(t,i,a){e.dg_flight_ds=null;var o=-1*(new Date).getTimezoneOffset();e.loadingVisible=!0,n.getCrewFlights(t,i,a).then(function(t){console.log(t),e.loadingVisible=!1,$.each(t,function(t,i){i.Route=i.FromAirportIATA+"-"+i.ToAirportIATA,i.STA=new Date(i.STA).addMinutes(o),i.STD=new Date(i.STD).addMinutes(o),i.ChocksIn&&(i.ChocksIn=new Date(i.ChocksIn).addMinutes(o)),i.ChocksOut&&(i.ChocksOut=new Date(i.ChocksOut).addMinutes(o)),i.Takeoff&&(i.Takeoff=new Date(i.Takeoff).addMinutes(o)),i.Landing&&(i.Landing=new Date(i.Landing).addMinutes(o)),i.DurationH=Math.floor(i.FlightTime/60),i.DurationM=i.FlightTime%60;var a=60*i.FlightH+i.FlightM;i.FlightTime2=pad(Math.floor(a/60)).toString()+":"+pad(a%60).toString(),i.ScheduledFlightTime2=e.formatMinutes(i.ScheduledFlightTime);i.ActualFlightHOffBlock,i.ActualFlightMOffBlock;i.BlockTime2=e.formatMinutes(i.BlockTime),i.SITATime2=e.formatMinutes(i.SITATime),i.FixTime2=e.formatMinutes(i.FixTime),i.Duty2=pad(Math.floor(i.Duty/60)).toString()+":"+pad(i.Duty%60).toString()}),e.dg_flight_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.statusDs=[{Id:1,Title:"Done"},{Id:2,Title:"Scheduled"},{Id:3,Title:"Canceled"},{Id:4,Title:"Starting"},{Id:5,Title:"All"}],e.fstatus=1,e.sb_Status={placeholder:"Status",showClearButton:!1,searchEnabled:!1,dataSource:e.statusDs,onSelectionChanged:function(e){},displayExpr:"Title",valueExpr:"Id",bindingOptions:{value:"fstatus"}},e.ip=null,e.sb_IP={placeholder:"IP",showClearButton:!0,searchEnabled:!0,dataSource:a.getDatasourceIP(),onSelectionChanged:function(e){},searchExpr:["ScheduleName","Name"],displayExpr:"ScheduleName",valueExpr:"Id",bindingOptions:{value:"ip"}},e.cpt=null,e.sb_CPT={placeholder:"Captain",showClearButton:!0,searchEnabled:!0,dataSource:a.getDatasourceCaptain(),onSelectionChanged:function(e){},searchExpr:["ScheduleName","Name"],displayExpr:"ScheduleName",valueExpr:"Id",bindingOptions:{value:"cpt"}},e.dg_flight_columns=[{cellTemplate:function(e,t){$("<div style='text-align:center'/>").html(t.rowIndex+1).appendTo(e)},name:"row",caption:"#",width:50,fixed:!0,fixedPosition:"left",allowResizing:!1,cssClass:"rowHeader"},{dataField:"STDDay",caption:"Date",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:120,format:"yy-MMM-dd",sortIndex:0,sortOrder:"asc",fixed:!0,fixedPosition:"left"},{dataField:"FlightNumber",caption:"Flight No",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:80,fixed:!1,fixedPosition:"left",fixed:!0,fixedPosition:"left"},{dataField:"FlightStatus",caption:"Status",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!1,fixedPosition:"left",fixed:!0,fixedPosition:"left"},{dataField:"AircraftType",caption:"Type",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150,sortIndex:1,sortOrder:"asc"},{dataField:"Register",caption:"Reg",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150,sortIndex:2,sortOrder:"asc"},{dataField:"FromAirportIATA",caption:"From",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:80},{dataField:"ToAirportIATA",caption:"To",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:80},{dataField:"STDLocal",caption:"Sch. Dep.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:115,format:"HH:mm"},{dataField:"STALocal",caption:"Sch. Arr.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:115,format:"HH:mm"},{dataField:"DepartureLocal",caption:"Dep.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:90,format:"HH:mm",sortIndex:2,sortOrder:"asc"},{dataField:"ArrivalLocal",caption:"Arr.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:90,format:"HH:mm"},{dataField:"PaxAdult",caption:"Adult",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"PaxChild",caption:"Child.",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"PaxInfant",caption:"Infant",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"TotalPax",caption:"Total Pax",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"CargoCount",caption:"Cargo",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"CargoWeight",caption:"Cargo(W)",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"BaggageCount",caption:"Baggage",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"BaggageWeight",caption:"Baggage(W)",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"IP",caption:"IP",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120},{dataField:"Captain",caption:"Captain",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120},{dataField:"TaxiTO2",caption:"Taxi T/O",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!0,fixedPosition:"right",visible:d},{dataField:"TaxiLND2",caption:"Taxi LND",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!0,fixedPosition:"right",visible:d},{dataField:"FlightTime2",caption:"Sch. FLT Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!0,fixedPosition:"right"},{dataField:"SITATime2",caption:"SITA FLT Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!0,fixedPosition:"right"},{dataField:"FlightTimeActual2",caption:"Act. FLT Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!0,fixedPosition:"right"},{dataField:"BlockTime2",caption:"Block Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100,fixed:!0,fixedPosition:"right"}],e.dg_flight_selected=null,e.dg_flight_instance=null,e.dg_flight_ds=null,e.dg_flight={wordWrapEnabled:!0,rowAlternationEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-140,columns:e.dg_flight_columns,onContentReady:function(t){e.dg_flight_instance||(e.dg_flight_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_flight_selected=i||null},summary:{totalItems:[{name:"TaxiTOTotal",showInColumn:"TaxiTO2",displayFormat:"{0}",summaryType:"custom"},{name:"TaxiLNDTotal",showInColumn:"TaxiLND2",displayFormat:"{0}",summaryType:"custom"},{name:"TaxiTOAvg",showInColumn:"TaxiTO2",displayFormat:"Avg: {0}",summaryType:"custom"},{name:"TaxiLNDAvg",showInColumn:"TaxiLND2",displayFormat:"Avg: {0}",summaryType:"custom"},{name:"FlightTimeTotal",showInColumn:"FlightTime2",displayFormat:"{0}",summaryType:"custom"},{name:"FlightTimeAvg",showInColumn:"FlightTime2",displayFormat:"Avg: {0}",summaryType:"custom"},{name:"ActualFlightTimeTotal",showInColumn:"FlightTimeActual2",displayFormat:"{0}",summaryType:"custom"},{name:"ActualFlightTimeAvg",showInColumn:"FlightTimeActual2",displayFormat:"Avg: {0}",summaryType:"custom"},{name:"SITATimeTotal",showInColumn:"SITATime2",displayFormat:"{0}",summaryType:"custom"},{name:"SITATimeAvg",showInColumn:"SITATime2",displayFormat:"Avg: {0}",summaryType:"custom"},{name:"BlockTimeTotal",showInColumn:"BlockTime2",displayFormat:"{0}",summaryType:"custom"},{name:"BlockTimeAvg",showInColumn:"BlockTime2",displayFormat:"Avg: {0}",summaryType:"custom"},{column:"PaxAdult",summaryType:"sum",customizeText:function(e){return e.value}},{column:"PaxAdult",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"PaxChild",summaryType:"sum",customizeText:function(e){return e.value}},{column:"PaxChild",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"PaxInfant",summaryType:"sum",customizeText:function(e){return e.value}},{column:"PaxInfant",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"TotalPax",summaryType:"sum",customizeText:function(e){return e.value}},{column:"TotalPax",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"CockpitTotal",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"CabinTotal",summaryType:"avg",customizeText:function(e){return"Avg: "+Number(e.value).toFixed(1)}},{column:"FuelDeparture",summaryType:"sum",customizeText:function(e){return e.value}},{column:"CargoCount",summaryType:"sum",customizeText:function(e){return e.value}},{column:"CargoWeight",summaryType:"sum",customizeText:function(e){return e.value}},{column:"BaggageWeight",summaryType:"sum",customizeText:function(e){return e.value}},{column:"BaggageCount",summaryType:"sum",customizeText:function(e){return e.value}}],calculateCustomSummary:function(e){"ActualFlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTimeActual,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"ActualFlightTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTimeActual,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FlightTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"BlockTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.BlockTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"BlockTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.BlockTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"TaxiTOTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.TaxiTO,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"TaxiLNDTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.TaxiLND,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"TaxiTOAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.TaxiTO,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"TaxiLNDAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.TaxiLND,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()))}},export:{enabled:!0,fileName:"Flights_Report",allowExportSelectedData:!1},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"before",template:function(){return $("<div/>").append("<span style='color:white;'>Flights</span>")}})},onExporting:function(e){e.component.beginUpdate(),e.component.columnOption("row","visible",!1)},onExported:function(e){e.component.columnOption("row","visible",!0),e.component.endUpdate()},onRowPrepared:function(e){e.data&&e.data.IsPositioning&&e.rowElement.css("background","#ffccff")},onCellPrepared:function(e){"data"===e.rowType&&"FlightStatus"==e.column.dataField&&e.cellElement.addClass(e.data.FlightStatus.toLowerCase())},bindingOptions:{dataSource:"dg_flight_ds"},columnChooser:{enabled:!0}},l.isAuthorized()?(a.page_title="> Flights Report",$(".reportflights").fadeIn(400,function(){})):l.redirectToLogin(),e.$on("$viewContentLoaded",function(){}),a.$broadcast("FlightsReportLoaded",null)}]),app.controller("regAvailabilityController",["$scope","$location","$routeParams","$rootScope","flightService","weatherService","aircraftService","authService","notificationService","$route",function(e,t,i,a,n,o,l,r,s,d){e.prms=i.prms,e.dsUrl=null,e.filterVisible=!1,e.btn_delete={text:"Delete",type:"danger",icon:"clear",width:120,onClick:function(t){if(e.dg_av_selected=a.getSelectedRow(e.dg_av_instance),!e.dg_av_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");General.Confirm(Config.Text_DeleteConfirm,function(t){if(t){var i={Id:e.dg_av_selected.Id};e.loadingVisible=!0,n.saveDeleteAog(i).then(function(t){e.loadingVisible=!1,General.ShowNotify(Config.Text_SavedOk,"success"),e.bindEvents(e.dg_selected.ID)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})}})}},e.btn_new={text:"New",type:"default",icon:"plus",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");e.popup_event_visible=!0}},e.btn_edit={text:"Edit",type:"default",icon:"edit",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");var i=e.dg_selected;a.$broadcast("InitAddPerson",i)}},e.btn_view={text:"View",type:"default",icon:"doc",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");var i=e.dg_selected;e.InitAddAirport(i)}},e.btn_search={text:"Search",type:"success",icon:"search",width:120,validationGroup:"crewreportsearch",bindingOptions:{},onClick:function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");e.dg_ds=null,e.$broadcast("getFilterQuery",null)}},e.selected_employee_id=null,e.btn_flight={text:"Flights",type:"default",icon:"airplane",width:120,bindingOptions:{},onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");e.selected_employee_id=e.dg_selected.Id,e.fillPerson(e.dg_selected),e.doSearch=!1,e.popup_flight_visible=!0}},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.dt_from=new Date,e.dt_to=(new Date).addDays(7),e.date_from={type:"date",placeholder:"From",width:"100%",bindingOptions:{value:"dt_from"}},e.filters=[],e.dg_selected=null,e.dg_columns=[{dataField:"AircraftType",caption:"Type",allowResizing:!0,dataType:"string",allowEditing:!1,width:200,alignment:"center",groupIndex:0},{dataField:"Register",caption:"Register",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1}],e.dg_height=$(window).height()-135,e.dg_instance=null,e.dg_ds=null,e.dg={grouping:{autoExpandAll:!0,allowCollapsing:!0},searchPanel:{visible:!1},groupPanel:{visible:!1},headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_columns,onContentReady:function(t){e.dg_instance||(e.dg_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];i?(e.dg_selected=i,e.bindEvents(i.ID)):(e.dg_selected=null,e.dg_av_ds=null)},onCellPrepared:function(e){},bindingOptions:{dataSource:"dg_ds",height:"dg_height"}},e.bindEvents=function(t){e.dg_av_ds=null,e.loadingVisible=!0,n.getAogs(t).then(function(t){e.loadingVisible=!1,e.dg_av_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.dg_av_selected=null,e.dg_av_columns=[{dataField:"GroundType",caption:"Type",allowResizing:!0,dataType:"string",allowEditing:!1,width:150,alignment:"center"},{caption:"Local",columns:[{caption:"From",dataField:"DateFromLocal",format:"yyyy-MMM-dd",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:130,alignment:"center"},{caption:"",dataField:"DateFromLocal",format:"HH:mm",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:90,alignment:"center"},{caption:"To",dataField:"DateEndLocal",format:"yyyy-MMM-dd",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:130,alignment:"center"},{caption:"",dataField:"DateEndLocal",format:"HH:mm",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:90,alignment:"center"}]},{caption:"UTC",columns:[{caption:"From",dataField:"DateFrom",format:"yyyy-MMM-dd",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:130,alignment:"center"},{caption:"",dataField:"DateFrom",format:"HH:mm",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:90,alignment:"center"},{caption:"To",dataField:"DateEnd",format:"yyyy-MMM-dd",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:130,alignment:"center"},{caption:"",dataField:"DateEnd",format:"HH:mm",allowResizing:!0,dataType:"datetime",allowEditing:!1,width:90,alignment:"center"}]},{dataField:"Remark",caption:"Remark",allowResizing:!0,dataType:"string",allowEditing:!1,alignment:"left"}],e.dg_av_height=$(window).height()-135,e.dg_av_instance=null,e.dg_av_ds=null,e.dg_av={grouping:{autoExpandAll:!0,allowCollapsing:!0},searchPanel:{visible:!1},groupPanel:{visible:!1},headerFilter:{visible:!1},filterRow:{visible:!1,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_av_columns,onContentReady:function(t){e.dg_av_instance||(e.dg_av_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_av_selected=i||null},onCellPrepared:function(e){},bindingOptions:{dataSource:"dg_av_ds",height:"dg_av_height"}},e.popup_event_visible=!1,e.popup_event_title="",e.popup_event={width:500,height:360,fullScreen:!1,showTitle:!0,dragEnabled:!1,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"success",text:"Ok",icon:"check",validationGroup:"regav",onClick:function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");var i=e.dg_selected.ID,a={DateFrom:new Date(e.FromDateEvent),DateEnd:new Date(e.ToDateEvent),RegisterId:i,GroundTypeId:e.aog,Remark:e.Remark};e.loadingVisible=!0,n.saveAog(a).then(function(t){e.loadingVisible=!1,e.bindEvents(i),e.popup_event_visible=!1},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,closeOnOutsideClick:!1,onShowing:function(e){},onShown:function(e){},onHiding:function(){e.FromDateEvent=null,e.ToDateEvent=null,e.aog=null,e.Remark=null},bindingOptions:{visible:"popup_event_visible",title:"popup_event_title"}},e.popup_event.toolbarItems[1].options.onClick=function(t){e.popup_event_visible=!1},e.Remark=null,e.text_remark={bindingOptions:{value:"Remark"}},e.FromDateEvent=null,e.ToDateEvent=null,e.date_from_event={type:"datetime",width:"100%",onValueChanged:function(e){},bindingOptions:{value:"FromDateEvent"}},e.date_to_event={type:"datetime",width:"100%",onValueChanged:function(e){},bindingOptions:{value:"ToDateEvent"}},e.dsTypes=[{Id:1e4,Title:"A Check"},{Id:10001,Title:"C Check"},{Id:10002,Title:"AOG"}],e.aog=null,e.sb_type={showClearButton:!0,width:"100%",searchEnabled:!1,displayExpr:"Title",valueExpr:"Id",onSelectionChanged:function(e){},bindingOptions:{value:"aog",dataSource:"dsTypes"}},e.doRefresh=!1,e.getFilters=function(){var t=e.filters;return 0==t.length&&(t=[["Id",">",0]]),t},e.bind=function(){var t=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss"),i="00101";"Cabin"==e.jgroup&&(i="00102");var n="odata/crew/report/main?date="+t+"&jc="+i;e.dg_ds||(e.dg_ds={store:{type:"odata",url:a.serviceUrl+n,key:"Id",version:4,onLoaded:function(e){$.each(e,function(e,t){t.Day1_Duty=pad(Math.floor(t.Day1_Duty/60)).toString()+":"+pad(t.Day1_Duty%60).toString(),t.Day1_Flight=pad(Math.floor(t.Day1_Flight/60)).toString()+":"+pad(t.Day1_Flight%60).toString(),t.Day7_Duty=pad(Math.floor(t.Day7_Duty/60)).toString()+":"+pad(t.Day7_Duty%60).toString(),t.Day14_Duty=pad(Math.floor(t.Day14_Duty/60)).toString()+":"+pad(t.Day14_Duty%60).toString(),t.Day28_Duty=pad(Math.floor(t.Day28_Duty/60)).toString()+":"+pad(t.Day28_Duty%60).toString(),t.Day28_Flight=pad(Math.floor(t.Day28_Flight/60)).toString()+":"+pad(t.Day28_Flight%60).toString(),t.Year_Flight=pad(Math.floor(t.Year_Flight/60)).toString()+":"+pad(t.Year_Flight%60).toString(),t.CYear_Flight=pad(Math.floor(t.CYear_Flight/60)).toString()+":"+pad(t.CYear_Flight%60).toString()}),a.$broadcast("OnDataLoaded",null)},beforeSend:function(t){e.dsUrl=General.getDsUrl(t),a.$broadcast("OnDataLoading",null)}}}),e.doRefresh&&(e.filters=e.getFilters(),e.dg_ds.filter=e.filters,e.dg_instance.refresh(),e.doRefresh=!1)},e.bindRegisters=function(){e.loadingVisible=!0,l.getMSNs(Config.CustomerId).then(function(t){e.loadingVisible=!1,e.dg_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},r.isAuthorized()?(a.page_title="> Registers",$(".regavailability").fadeIn(),e.bindRegisters()):r.redirectToLogin(),e.$on("getFilterResponse",function(t,i){e.filters=i,e.doRefresh=!0,e.bind()}),e.$on("onTemplateSearch",function(t,i){e.$broadcast("getFilterQuery",null)}),e.$on("onPersonSaved",function(t,i){e.doRefresh=!0}),e.$on("onPersonHide",function(t,i){e.bind()}),a.$broadcast("RegAvailabilityLoaded",null)}]),app.controller("routeController",["$scope","$location","$routeParams","$rootScope","airportService","flightService","authService","$route",function(e,t,i,a,n,o,l,r){e.prms=i.prms,e.IsDispatch=r.current.isDispatch,e.IsBase=!e.IsDispatch,e.dsUrl=null,e.filterVisible=!1,e.btn_delete={text:"Delete",type:"danger",icon:"clear",width:120,bindingOptions:{visible:"IsBase"},onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");General.Confirm(Config.Text_DeleteConfirm,function(t){if(t){var i={Id:e.dg_selected.Id};e.loadingVisible=!0,o.deleteRoute(i).then(function(t){e.loadingVisible=!1,General.ShowNotify(Config.Text_SavedOk,"success"),e.doRefresh=!0,e.bindRoutes()},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})}})}},e.btn_new={text:"New",type:"default",icon:"plus",width:120,onClick:function(e){var t={Id:null};a.$broadcast("InitAddRoute",t)}},e.btn_edit={text:"Edit",type:"default",icon:"edit",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");var i=e.dg_selected;a.$broadcast("InitAddAirport",i)},bindingOptions:{visible:"IsBase"}},e.btn_flights={text:"Flights",type:"default",icon:"rowfield",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");var i=e.dg_selected;a.navigateairport(i.IATA)},bindingOptions:{visible:"IsDispatch"}},e.btn_view={text:"View",type:"default",icon:"doc",width:120,onClick:function(t){if(e.dg_selected=a.getSelectedRow(e.dg_instance),!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");var i=e.dg_selected;e.InitAddAirport(i)}},e.btn_search={text:"Search",type:"success",icon:"search",width:120,bindingOptions:{},onClick:function(t){e.doRefresh=!0,e.bindRoutes()}},e.btn_print={text:"Print",type:"default",icon:"print",width:120},e.btn_filter={text:"",type:"default",icon:"filter",width:40,onClick:function(t){e.filterVisible?(e.filterVisible=!1,$(".filter").fadeOut()):(e.filterVisible=!0,$(".filter").fadeIn())}},e.bindRoutes=function(){e.doRefresh&&(e.dg_ds=null,e.loadingVisible=!0,o.getRoutes(Config.AirlineId).then(function(t){e.loadingVisible=!1,e.dg_ds=t},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")}))},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.filters=[],e.dg_columns=[{dataField:"Id",caption:"Id",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150},{dataField:"AirlineId",caption:"Airline",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150},{caption:"Source",columns:[{dataField:"FromAirportIATA",caption:"IATA",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100,sortIndex:0,sortOrder:"asc"},{dataField:"FromCity",caption:"City",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150},{dataField:"FromCountry",caption:"Country",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150}]},{caption:"Destination",columns:[{dataField:"ToAirportIATA",caption:"IATA",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100,sortIndex:1,sortOrder:"asc"},{dataField:"ToCity",caption:"City",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150},{dataField:"ToCountry",caption:"Country",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150}]},{caption:"Duration",columns:[{dataField:"FlightH",caption:"HH",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100},{dataField:"FlightM",caption:"MM",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:100}]},{caption:"Airports",columns:[{dataField:"FromAirportName",caption:"Source",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1},{dataField:"ToAirportName",caption:"Destination",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1}]}],e.dg_selected=null,e.dg_instance=null,e.dg_ds=null,e.dg={headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-135,columns:e.dg_columns,onContentReady:function(t){e.dg_instance||(e.dg_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_selected=i||null},onCellPrepared:function(e){"data"==e.rowType&&"FromAirportIATA"===e.column.dataField&&e.cellElement.css("background","palegreen"),"data"==e.rowType&&"ToAirportIATA"===e.column.dataField&&e.cellElement.css("background","lightpink"),"data"==e.rowType&&"FlightH"===e.column.dataField&&e.cellElement.css("background","papayawhip"),"data"==e.rowType&&"FlightM"===e.column.dataField&&e.cellElement.css("background","papayawhip")},bindingOptions:{dataSource:"dg_ds"}},e.doRefresh=!1,e.getFilters=function(){var t=e.filters;return 0==t.length&&(t=[["Id",">",0]]),t},e.bind=function(){e.dg_ds||(e.dg_ds={store:{type:"odata",url:a.serviceUrl+"odata/airports/all",key:"Id",version:4,onLoaded:function(e){a.$broadcast("OnDataLoaded",null)},beforeSend:function(t){e.dsUrl=General.getDsUrl(t),a.$broadcast("OnDataLoading",null)}}}),e.doRefresh&&(e.filters=e.getFilters(),e.dg_ds.filter=e.filters,e.dg_instance.refresh(),e.doRefresh=!1)},l.isAuthorized()?(a.page_title="> Block Times",$(".route").fadeIn()):l.redirectToLogin(),e.$on("getFilterResponse",function(t,i){e.filters=i,e.doRefresh=!0,e.bindRoutes()}),e.$on("onTemplateSearch",function(t,i){e.$broadcast("getFilterQuery",null)}),e.$on("onRouteSaved",function(t,i){e.doRefresh=!0}),e.$on("onRouteHide",function(t,i){alert(e.doRefresh),e.bindRoutes()}),a.$broadcast("AirportLoaded",null)}]),app.controller("signupController",["$scope","$location","$timeout","authService",function(e,t,i,a){e.savedSuccessfully=!1,e.message="",e.registration={userName:"Aida",password:"1234@aA",Email:"SHARAFI.AIDA@GMAIL.COM",confirmPassword:"1234@aA"},e.signUp=function(){a.saveRegistration(e.registration).then(function(t){e.savedSuccessfully=!0,e.message="User has been registered successfully, you will be redicted to login page in 2 seconds.",n()},function(t){var i=[]
;for(var a in t.data.modelState)for(var n=0;n<t.data.modelState[a].length;n++)i.push(t.data.modelState[a][n]);e.message="Failed to register user due to:"+i.join(" ")})};var n=function(){var e=i(function(){i.cancel(e),t.path("/login")},2e3)}}]),app.controller("testController",["$scope","testService","authService",function(e,t,i){alert(i.IsAuthurized())}]),app.controller("routeAddController",["$scope","$location","airportService","flightService","authService","$routeParams","$rootScope",function(e,t,i,a,n,o,l){e.isNew=!0,e.entity={Id:null,AirlineId:Config.AirlineId,SourceAirportId:null,DestinationAirportId:null,FlightH:null,FlightM:null},e.clearEntity=function(){e.entity.Id=null,e.entity.AirlineId=Config.AirlineId,e.entity.SourceAirportId=null,e.entity.DestinationAirportId=null,e.entity.FlightH=null,e.entity.FlightM=null},e.bind=function(t){e.entity.Id=t.Id,e.entity.AirlineId=Config.AirlineId,e.entity.SourceAirportId=t.SourceAirportId,e.entity.DestinationAirportId=t.DestinationAirportId,e.entity.FlightH=t.FlightH,e.entity.FlightM=t.FlightM},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.txt_fh={min:0,showSpinButtons:!0,bindingOptions:{value:"entity.FlightH"}},e.txt_fm={min:0,showSpinButtons:!0,bindingOptions:{value:"entity.FlightM"}},e.sb_from={showClearButton:!0,searchEnabled:!0,dataSource:l.getDatasourceAirport(),itemTemplate:function(e){return l.getSbTemplateAirport(e)},onSelectionChanged:function(e){},searchExpr:["IATA","Country","SortName","City"],displayExpr:"IATA",valueExpr:"Id",bindingOptions:{value:"entity.SourceAirportId"}},e.sb_to={showClearButton:!0,searchEnabled:!0,dataSource:l.getDatasourceAirport(),itemTemplate:function(e){return l.getSbTemplateAirport(e)},onSelectionChanged:function(e){},searchExpr:["IATA","Country","SortName","City"],displayExpr:"IATA",valueExpr:"Id",bindingOptions:{value:"entity.DestinationAirportId"}},e.pop_width=400,e.pop_height=450,e.popup_add_visible=!1,e.popup_add_title="New",e.popup_add={fullScreen:!1,showTitle:!0,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"default",text:"Save",icon:"check",validationGroup:"routeadd",bindingOptions:{}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,dragEnabled:!1,closeOnOutsideClick:!1,onShowing:function(t){var i=l.getWindowSize();i.width<=600&&(e.pop_width=i.width,e.pop_height=i.height)},onShown:function(t){e.isNew,null!=e.tempData&&e.bind(e.tempData)},onHiding:function(){e.clearEntity(),l.$broadcast("onRoutetHide",null),e.popup_add_visible=!1},bindingOptions:{visible:"popup_add_visible",width:"pop_width",height:"pop_height",title:"popup_add_title"}},e.popup_add.toolbarItems[1].options.onClick=function(t){e.popup_add_visible=!1},e.popup_add.toolbarItems[0].options.onClick=function(t){if(!t.validationGroup.validate().isValid)return void General.ShowNotify(Config.Text_FillRequired,"error");e.isNew&&(e.entity.Id=-1),e.loadingVisible=!0,a.saveRoute(e.entity).then(function(t){e.clearEntity(),General.ShowNotify(Config.Text_SavedOk,"success"),l.$broadcast("onRouteSaved",t),e.loadingVisible=!1,e.isNew||(e.popup_add_visible=!1)},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.tempData=null,e.$on("InitAddRoute",function(t,i){e.tempData=null,i.Id?(e.popup_add_title="Edit",e.tempData=i,e.isNew=!1):(e.isNew=!0,e.popup_add_title="New"),e.popup_add_visible=!0})}]),app.controller("studyFieldSelectController",["$scope","$location","authService","$routeParams","$rootScope",function(e,t,i,a,n){e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.dg_columns=[{dataField:"Title",caption:"Title",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1}],e.dg_selected=null,e.dg_instance=null,e.dg_ds=null,e.dg={showRowLines:!0,showColumnLines:!0,sorting:{mode:"multiple"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"multiple"},filterRow:{visible:!0,showOperationChooser:!0},columnAutoWidth:!1,columns:e.dg_columns,onContentReady:function(t){e.dg_instance||(e.dg_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData;e.dg_selected=i||null},bindingOptions:{dataSource:"dg_ds",height:"dg_height"}},e.dg_height=100,e.pop_width=700,e.pop_height=500,e.popup_add_visible=!1,e.popup_add_title="Study Fields",e.popup_add={fullScreen:!1,showTitle:!0,toolbarItems:[{widget:"dxButton",location:"after",options:{type:"default",text:"Ok",icon:"check",bindingOptions:{}},toolbar:"bottom"},{widget:"dxButton",location:"after",options:{type:"danger",text:"Close",icon:"remove"},toolbar:"bottom"}],visible:!1,dragEnabled:!1,closeOnOutsideClick:!1,onShowing:function(t){var i=n.getWindowSize();i.width<=700&&(e.pop_width=i.width,e.pop_height=i.height),e.dg_height=e.pop_height-100},onShown:function(t){e.bind()},onHiding:function(){e.popup_add_visible=!1},bindingOptions:{visible:"popup_add_visible",width:"pop_width",height:"pop_height",title:"popup_add_title"}},e.popup_add.toolbarItems[1].options.onClick=function(t){e.popup_add_visible=!1},e.popup_add.toolbarItems[0].options.onClick=function(t){if(!e.dg_selected)return void General.ShowNotify(Config.Text_NoRowSelected,"error");n.$broadcast("onStudyFieldSelectHide",e.dg_selected),e.popup_add_visible=!1},e.bind=function(){e.dg_ds?e.dg_instance.clearSelection():e.dg_ds={store:{type:"odata",url:n.serviceUrl+"odata/options/59",key:"Id",version:4}}},e.$on("InitStudyFieldSelect",function(t,i){e.popup_add_visible=!0})}]),app.controller("statDelayController",["$scope","$location","$routeParams","$rootScope","flightService","statService","weatherService","aircraftService","authService","notificationService","$route",function(e,t,i,a,n,o,l,r,s,d,u){e.isMainVisible=!1,e.prms=i.prms,e.height550=350,e.resize=function(){var t=$(".hx").height()?$(".hx").height():a.headerHeight;e.scroll_height=$(window).height()-t-40,e.scroll_height_det=$(window).height()-t-40-42+20,e.scroll_height_detd=$(window).height()-t-40-42-10,e.barWidth=50,e.diameter=.85;var i=$(window).width();i<=400?(e.height550=350,e.barWidth=20,e.diameter=.65):i>400&&i<=640?(e.barWidth=30,e.height550=350):e.height550=i>640&&i<=768?400:550},e.resize();var c=[{text:"Total",id:"summery"},{text:"Category",id:"category"},{text:"Airport",id:"airport"},{text:"Detail",id:"detail"}],g=[{text:"Total",id:"dsummery"},{text:"Category",id:"dcategory"},{text:"Airport",id:"dairport"}];e.tabs=c,e.tabs_detail=g,e.$watch("selectedTabIndex",function(t){$(".tabc").hide();var i=c[t].id;$("#"+i).fadeIn(500,function(){e.dg_yearweekcat_instance.repaint(),e.dg_yearcat_instance.repaint(),e.dg_yearweekapt_instance.repaint(),e.dg_yearapt_instance.repaint(),e.dg_yearaptcat_instance.repaint(),e.dg_yearweekaptcat_instance.repaint()}),"airport"==i&&$(".pies1").each(function(){$(this).dxPieChart("instance").render()})}),e.$watch("selectedTabDetailIndex",function(t){$(".tabcd").hide();var i=g[t].id;$("#"+i).fadeIn(500,function(){e.line_daily_instance&&e.line_daily_instance.render(),e.line_dailydl_instance&&e.line_dailydl_instance.render(),e.line_daycat_instance&&e.line_daycat_instance.render(),e.bar_daycat_instance&&e.bar_daycat_instance.render(),e.pie_cat_instance&&e.pie_cat_instance.render(),e.bar_cat_instance&&e.bar_cat_instance.render()}),"dairport"==i&&($(".pies2").each(function(){$(this).dxPieChart("instance").render()}),e.line_dayapt_instanse.render(),e.bar_dayapt_instanse.render(),e.line_dayaptcat_instanse.render(),e.bar_dayaptcat_instanse.render())}),e.tabs_options={onItemClick:function(e){},bindingOptions:{dataSource:{dataPath:"tabs",deep:!0},selectedIndex:"selectedTabIndex"}},e.tabs_detail_options={onItemClick:function(e){},bindingOptions:{dataSource:{dataPath:"tabs_detail",deep:!0},selectedIndex:"selectedTabDetailIndex"}},e.selectedTabIndex=0,e.selectedTabDetailIndex=-1,e.boardSummary={arrived:"-",flights:"-",flightTime:"-",flightTimeStr:"-",fixTime:"-",blockTime:"-",blockTimeStr:"-",cancled:"-",delayRatio:"-",delay:"-",delayStr:"-",pax:"-",seat:"-",paxLoad:"-"};(new Date).getTimezoneOffset();e.dsUrl=null,e.formatMinutes=function(e){return pad(Math.floor(e/60)).toString()+":"+pad(Math.floor(e%60)).toString()},e.data=null,e.lineDayCatSeries=[],e.lineDayAptSeries=[],e.lineDayAptCatSeries=[],e.lineDayAptCatSeriesTemp=[],e.chbDayCats=[],e.chbDayApts=[],e.selectedCatsDaily2={},e.selectedDailyAptCatsChangedEnabled=!1,e.selectedDailyAptCatsChanged=function(){if(e.selectedDailyAptCatsChangedEnabled){e.lineDayAptCatSeries=[];for(var t in e.selectedAptsDaily2)for(var i in e.selectedCatsDaily2){var a=t+"-"+i;if(e.selectedAptsDaily2[t]&&e.selectedCatsDaily2[i]){var n=Enumerable.From(e.lineDayAptCatSeriesTemp).Where('$.name=="'+a+'"').FirstOrDefault();n&&e.lineDayAptCatSeries.push(JSON.parse(JSON.stringify(n)))}}e.line_dayaptcat_instanse.render(),e.bar_dayaptcat_instanse.render()}},e.bind=function(){var t=e.dt_to?e.dt_to:new Date(2200,4,19,0,0,0),i=e.dt_from?e.dt_from:new Date(1900,4,19,0,0,0);e.lineDayAptCatSeriesTemp=[],e.lineDayAptCatSeries=[],e.loadingVisible=!0,o.getDelayStat(Config.CustomerId,i,t).then(function(t){e.loadingVisible=!1,e.data=t,console.log("daily"),console.log(e.data),e.dg_cat_height=32*(t.category.length+1),e.dg_cat_height=300,e.barMax=0,e.barMax+=5,e.dg_cat_ds=t.category,e.dg_cat_det_ds=t.categoryDetails,e.pie_cat_ds=t.category,e.pie_air_ds=t.airport,e.bar_cat_ds=t.category,e.dg_air_ds=t.airport,e.dg_airc_ds=t.airportCategory,e.dg_air_det_ds=t.airportDetails;var i=Enumerable.From(t.airportCategory).GroupBy("$.Airport",null,function(e,t){return{Airport:e,Items:t.OrderBy("$.Category").ToArray()}}).OrderBy("$.Airport").ToArray(),a=Enumerable.From(t.airportCategory).Select("$.Category").OrderBy("$").Distinct().ToArray();e.bar_airc_series=[],$.each(a,function(t,i){e.bar_airc_series.push({valueField:i,name:i,color:e.data.categoryColors[i]})}),e.bar_airc_ds=[],$.each(i,function(t,i){var a={Airport:i.Airport};$.each(i.Items,function(e,t){a[t.Category]=t.Delay}),e.bar_airc_ds.push(a)});var n=Enumerable.From(t.airportCategory).GroupBy("$.Category",null,function(e,t){return{Category:e,Items:t.OrderBy("$.Airport").ToArray()}}).OrderBy("$.Category").ToArray(),o=Enumerable.From(t.airportCategory).Select("$.Airport").OrderBy("$").Distinct().ToArray();e.bar_cata_series=[],$.each(o,function(t,i){e.bar_cata_series.push({valueField:i,name:i,color:e.data.airportColors[i]})}),e.bar_cata_ds=[],$.each(n,function(t,i){var a={Category:i.Category};$.each(i.Items,function(e,t){a[t.Airport]=t.Delay}),e.bar_cata_ds.push(a)}),e.catColors=[];for(var l in t.categoryColors)e.catColors.push(t.categoryColors[l]);e.airColors=[];for(var l in t.airportColors)e.airColors.push(t.airportColors[l]);$.each(t.category,function(i,a){a.AvgFormatted=e.formatMinutes(a.Avg),a.Delay>e.barMax&&(e.barMax=a.Delay),e.selectedCatsDaily[a.Category]=!0,a.chb={onValueChanged:function(t){e.selectedCatsChangedDaily()},bindingOptions:{value:'selectedCatsDaily["'+a.Category+'"]'}},e.lineDayCatSeries.push({valueField:a.Category,name:a.Category,color:t.categoryColors[a.Category]}),e.selectedCatsDaily2[a.Category]=0==i,e.chbDayCats.push({text:a.Category,onValueChanged:function(t){e.selectedDailyAptCatsChanged()},bindingOptions:{value:'selectedCatsDaily2["'+a.Category+'"]'}})}),$.each(t.airport,function(i,a){e.selectedAptsDaily[a.Airport]=!0,a.chb={onValueChanged:function(t){e.selectedAptsChangedDaily()},bindingOptions:{value:'selectedAptsDaily["'+a.Airport+'"]'}},e.lineDayAptSeries.push({valueField:a.Airport,name:a.Airport,color:t.airportColors[a.Airport]}),e.selectedAptsDaily2[a.Airport]=!0,e.chbDayApts.push({text:a.Airport,onValueChanged:function(t){e.selectedDailyAptCatsChanged()},bindingOptions:{value:'selectedAptsDaily2["'+a.Airport+'"]'}}),a.cats=Enumerable.From(t.airportCategoryGrouped).Where('$.Airport =="'+a.Airport+'"').ToArray(),a.pie={type:"doughnut",palette:"Harmony Light",title:{verticalAlignment:"bottom",horizontalAlignment:"center",text:a.Airport,font:{size:14,weight:900}},legend:{visible:!1},series:[{argumentField:"Category",valueField:"Delay",label:{visible:!0,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText.substr(0,4)+" ("+e.percentText+")"}}}],sizeGroup:"piecat2",size:{height:290},bindingOptions:{}},a.pie.dataSource=a.cats});for(var r in e.selectedAptsDaily2){var s=0;for(var d in e.selectedCatsDaily2)console.log(r+"-"+d),e.lineDayAptCatSeriesTemp.push({valueField:r+"-"+d,name:r+"-"+d}),s++}e.selectedDailyAptCatsChangedEnabled=!0,e.selectedDailyAptCatsChanged(),e.IsDetailVisible=!0,e.selectedTabDetailIndex=0,e.resize()},function(t){e.loadingVisible=!1,General.ShowNotify(t.message,"error")})},e.getVisibleCats=function(){var t=[];for(var i in e.selectedCats)e.selectedCats[i]&&t.push(i);return t},e.getVisibleApts=function(){var t=[];for(var i in e.selectedApts)e.selectedApts[i]&&t.push(i);return t},e.selectedCatsChanged=function(){var t=e.getVisibleApts();for(var i in e.selectedCats){if(e.selectedCats[i]){var a=Enumerable.From(e.lineYearAptCatSeriesTemp).Where('$.name.indexOf("'+i+'")!=-1').ToArray();$.each(a,function(i,a){Enumerable.From(e.lineYearAptCatSeries).Where('$.name=="'+a.name+'"').FirstOrDefault()||-1==t.indexOf(a.name.split("-")[0])||e.lineYearAptCatSeries.push(JSON.parse(JSON.stringify(a)))})}else e.lineYearAptCatSeries=Enumerable.From(e.lineYearAptCatSeries).Where('$.name.indexOf("'+i+'")==-1').ToArray()}},e.selectedAptsChanged=function(){var t=e.getVisibleCats();for(var i in e.selectedApts){if(e.selectedApts[i]){e.line_yearapt_instanse.getSeriesByName(i).show(),e.bar_yearapt_instanse.getSeriesByName(i).show(),e.line_yearweekapt_instanse.getSeriesByName(i).show(),e.bar_yearweekapt_instanse.getSeriesByName(i).show();var a=Enumerable.From(e.lineYearAptCatSeriesTemp).Where('$.name.indexOf("'+i+'")!=-1').ToArray();$.each(a,function(i,a){Enumerable.From(e.lineYearAptCatSeries).Where('$.name=="'+a.name+'"').FirstOrDefault()||-1==t.indexOf(a.name.split("-")[1])||e.lineYearAptCatSeries.push(JSON.parse(JSON.stringify(a)))})}else e.line_yearapt_instanse.getSeriesByName(i).hide(),e.bar_yearapt_instanse.getSeriesByName(i).hide(),e.line_yearweekapt_instanse.getSeriesByName(i).hide(),e.bar_yearweekapt_instanse.getSeriesByName(i).hide(),e.lineYearAptCatSeries=Enumerable.From(e.lineYearAptCatSeries).Where('$.name.indexOf("'+i+'")==-1').ToArray()}},e.selectedCatsChanged2=function(){for(var t in e.selectedCats2){e.selectedCats2[t]?(e.line_yearcat_instance.getSeriesByName(t).show(),e.bar_yearcat_instance.getSeriesByName(t).show(),e.line_yearweekcat_instance.getSeriesByName(t).show(),e.bar_yearweekcat_instance.getSeriesByName(t).show()):(e.line_yearcat_instance.getSeriesByName(t).hide(),e.bar_yearcat_instance.getSeriesByName(t).hide(),e.line_yearweekcat_instance.getSeriesByName(t).hide(),e.bar_yearweekcat_instance.getSeriesByName(t).hide())}},e.selectedCatsChangedDaily=function(){for(var t in e.selectedCatsDaily){e.selectedCatsDaily[t]?(e.line_daycat_instance.getSeriesByName(t).show(),e.bar_daycat_instance.getSeriesByName(t).show()):(e.line_daycat_instance.getSeriesByName(t).hide(),e.bar_daycat_instance.getSeriesByName(t).hide())}},e.selectedAptsChangedDaily=function(){for(var t in e.selectedAptsDaily){e.selectedAptsDaily[t]?(e.line_dayapt_instanse.getSeriesByName(t).show(),e.bar_dayapt_instanse.getSeriesByName(t).show()):(e.line_dayapt_instanse.getSeriesByName(t).hide(),e.bar_dayapt_instanse.getSeriesByName(t).hide())}},e.selectedCats2={},e.selectedCatsDaily={},e.selectedAptsDaily={},e.selectedAptsDaily2={},e.chbCats2=[],e.selectedApts={},e.selectedCats={},e.chbCats=[],e.chbApts=[],e.catDs=null,e.monthDs=null,e.lineYearSeries=[],e.lineYearDLSeries=[],e.lineYearWeekSeries=[],e.lineYearWeekDLSeries=[],e.lineYearCatSeries=[],e.lineYearCatMonthSeries=[],e.pieYearCatSeries=[],e.lineYearCatDs=[],e.lineYearWeekCatDs=[],e.lineYearAptSeries=[],e.lineYearAptCatSeries=[],e.lineYearAptCatSeriesTemp=[],e.lineYearDs=[{Month:"M01"},{Month:"M02"},{Month:"M03"},{Month:"M04"},{Month:"M05"},{Month:"M06"},{Month:"M07"},{Month:"M08"},{Month:"M09"},{Month:"M10"},{Month:"M11"},{Month:"M12"}],e.lineYearWeekDs=[],e.dataYear=null,e.categories2=[],e.categoriesWeek2=[],e.bindYearly=function(){e.loadingVisible=!0,o.getDelayStatYearly(Config.CustomerId).then(function(t){e.catColors2=[];for(var i in t.categoryColors)e.catColors2.push(t.categoryColors[i]);e.loadingVisible=!1,$.each(t.categoriesSum,function(t,i){e.selectedCats2[i.category]=!0,i.chb={onValueChanged:function(t){e.selectedCatsChanged2()},bindingOptions:{value:'selectedCats2["'+i.category+'"]'}}}),$.each(t.airportsSum,function(i,a){e.selectedApts[a.airport]=!0,a.chb={onValueChanged:function(t){e.selectedAptsChanged()},bindingOptions:{value:'selectedApts["'+a.airport+'"]'}},a.cats=Enumerable.From(t.airportsCategoriesSum).Where('$.airport =="'+a.airport+'"').ToArray(),console.log("_d.cats"),console.log(a.cats),a.pie={type:"doughnut",palette:"Harmony Light",title:{verticalAlignment:"bottom",horizontalAlignment:"center",text:a.airport,font:{size:14,weight:900}},legend:{visible:!1},series:[{argumentField:"category",valueField:"sum",label:{visible:!0,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText.substr(0,4)+" ("+e.percentText+")"}}}],sizeGroup:"piecat2",size:{height:300,width:"100%"},bindingOptions:{}},a.pie.dataSource=a.cats}),e.dataYear=t,e.dg_year_ds=t.delays,e.monthDs=Enumerable.From(t.delays).Distinct("[$.PassedYear, $.MonthOfYear].join(',')").OrderBy("$.PassedYear").ThenBy("$.MonthOfYear").Select("{Year:$.PassedYear,Month:$.MonthOfYear,MonthStr:$.MonthStr,Title:$.Title,MonthFrom:$.MonthFrom,MonthTo:$.MonthTo}").ToArray(),e.dg_yearweek_ds=t.delaysWeek,$.each(t.grouped,function(i,a){var n=Enumerable.From(a).Select("$.MonthOfYear").Min(),o=Enumerable.From(a).Select("$.MonthOfYear").Max(),l="Year"+(i+1).toString();e.lineYearSeries.push({valueField:l,name:"Year "+(i+1).toString()}),e.lineYearSeries.push({valueField:"TRND",name:"Trend "+(i+1).toString(),width:3,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1}}),e.lineYearDLSeries.push({valueField:l+"DL",name:"Year "+(i+1).toString()+" Delay/Leg",pane:"topPane",width:4}),e.lineYearDLSeries.push({valueField:"TRNDDL",name:"Trend "+(i+1).toString()+" Delay/Leg",pane:"topPane",width:2,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1}}),e.lineYearDLSeries.push({valueField:l+"DR",name:"Year "+(i+1).toString()+" Delay Ratio",pane:"middlePane"}),e.lineYearDLSeries.push({valueField:"Legs",name:"Year "+(i+1).toString()+" Legs",pane:"bottomPane"});var r;for(r=n-1;r<o;r++){var s=Enumerable.From(a).Where("$.MonthOfYear=="+(r+1)).FirstOrDefault();s||(s={Delay:null,Count:null,DelayLeg:null,DelayRatio:null,BlockTime:null,TotalFlights:null}),e.lineYearDs[r][l]=s.Delay,e.lineYearDs[r].Count=s.Count,e.lineYearDs[r][l+"DL"]=s.DelayLeg,e.lineYearDs[r][l+"DR"]=s.DelayRatio,e.lineYearDs[r].BL=s.BlockTime?e.formatMinutes(s.BlockTime):"",e.lineYearDs[r].Legs=s.TotalFlights;var d=Enumerable.From(t.delaysTrend).Where("$.X=="+(r+1).toString()).FirstOrDefault();e.lineYearDs[r].TRND=d?d.Y:null;var u=Enumerable.From(t.delayLegTrend).Where("$.X=="+(r+1).toString()).FirstOrDefault();e.lineYearDs[r].TRNDDL=u?u.Y:null}}),$.each(t.groupedWeek,function(i,a){var n="Year"+(i+1).toString();e.lineYearWeekSeries.push({valueField:n,name:"Year "+(i+1).toString()}),e.lineYearWeekSeries.push({valueField:"TRND",name:"Trend "+(i+1).toString(),width:3,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1}}),e.lineYearWeekDLSeries.push({valueField:n+"DL",name:"Delay/Leg",pane:"topPane"}),e.lineYearWeekDLSeries.push({valueField:"TRNDDL",name:"Trend "+(i+1).toString()+" Delay/Leg",pane:"topPane",width:2,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1}}),e.lineYearWeekDLSeries.push({valueField:n+"DR",name:"Delay Ratio",pane:"middlePane"}),e.lineYearWeekDLSeries.push({valueField:"Legs",name:"Year "+(i+1).toString()+" Legs",pane:"bottomPane"});for(var o=Enumerable.From(a).Select("$.MonthOfYear").Min(),l=Enumerable.From(a).Select("$.MonthOfYear").Max(),r=0,s=o;s<=l;s++)for(var d=1;d<=4;d++){var u={Week:"M"+s.toString()+"W"+d.toString()},c=Enumerable.From(a).Where("$.MonthOfYear=="+s+" && $.WeekOfMonth=="+d).FirstOrDefault();c||(c={Delay:0,Count:0,DelayLeg:0,DelayRatio:0,BlockTime:0,TotalFlights:0}),u[n]=c.Delay,u[n+"Count"]=c.Count,u[n+"DL"]=c.DelayLeg,u[n+"DR"]=c.DelayRatio,u[n+"BL"]=c.BlockTime?e.formatMinutes(c.BlockTime):"",u.Legs=c.TotalFlights;var g=Enumerable.From(t.delaysWeekTrend).Where("$.X=="+r).FirstOrDefault();u.TRND=g?g.Y:null;var m=Enumerable.From(t.delayLegWeekTrend).Where("$.X=="+r).FirstOrDefault();u.TRNDDL=m?m.Y:null,e.lineYearWeekDs.push(u),r++}});var a=Enumerable.From(t.categories).Where("$.PassedYear==1").ToArray(),n=Enumerable.From(t.airports).Where("$.PassedYear==1").ToArray(),o=Enumerable.From(t.categoriesWeek).Where("$.PassedYear==1").ToArray(),l=Enumerable.From(t.airportsWeek).Where("$.PassedYear==1").ToArray(),r=Enumerable.From(t.airportsCategoriesWeek).Where("$.PassedYear==1").ToArray();console.log(r);var s=Enumerable.From(t.airportsCategories).Where("$.PassedYear==1").ToArray(),d=Enumerable.From(a).Select("$.MonthOfYear").Min(),u=Enumerable.From(a).Select("$.MonthOfYear").Max(),c=Enumerable.From(a).Select("$.Category").Distinct().OrderBy("$").ToArray();e.catDs=c,e.selectedCat=e.catDs[0];var g=Enumerable.From(n).Select("$.Airport").Distinct().OrderBy("$").ToArray();$.each(c,function(i,a){e.chbCats2.push({text:a,onValueChanged:function(t){e.selectedCatsChanged2()},bindingOptions:{value:'selectedCats2["'+a+'"]'}}),e.selectedCats[a]=!1,e.chbCats.push({text:a,onValueChanged:function(t){e.selectedCatsChanged()},bindingOptions:{value:'selectedCats["'+a+'"]'}}),0==i&&(e.selectedCats[a]=!0),e.lineYearCatSeries.push({valueField:a,name:a,color:t.categoryColors[a]}),e.pieYearCatSeries.push({argumentField:a,valueField:"Month",name:a,color:t.categoryColors[a]});for(var n=d;n<=u;n++){var o=Enumerable.From(t.categories).Where("$.MonthOfYear=="+n+' && $.Category=="'+a+'"').FirstOrDefault();o?e.categories2.push({Title:"M"+n,Delay:o.Delay,Count:o.Count,Category:a}):e.categories2.push({Title:"M"+n,Delay:0,Count:0,Category:a});for(var l=1;l<=4;l++){var r=Enumerable.From(t.categoriesWeek).Where("$.MonthOfYear=="+n+" && $.WeekOfMonth=="+l+' && $.Category=="'+a+'"').FirstOrDefault();r?e.categoriesWeek2.push({Title:"M"+n+"W"+l,Delay:r.Delay,Count:r.Count,Category:a,Month:n}):e.categoriesWeek2.push({Title:"M"+n+"W"+l,Delay:0,Count:0,Category:a,Month:n})}}}),$.each(g,function(i,a){e.chbApts.push({text:a,onValueChanged:function(t){e.selectedAptsChanged()},bindingOptions:{value:'selectedApts["'+a+'"]'}}),e.lineYearAptSeries.push({valueField:a,name:a,color:t.airportColors[a]}),$.each(c,function(t,i){e.lineYearAptCatSeriesTemp.push({valueField:a+"-"+i,name:a+"-"+i}),0==t&&e.lineYearAptCatSeries.push({valueField:a+"-"+i,name:a+"-"+i})})});for(var m=d;m<=u;m++){e.lineYearCatMonthSeries.push({valueField:"M"+m,name:"M"+m});var p={Month:"M"+pad(m).toString()};$.each(c,function(e,t){var i=Enumerable.From(a).Where("$.MonthOfYear=="+m+' && $.Category=="'+t+'"').FirstOrDefault();i?(p[t]=i.Delay,p[t+"Count"]=i.Count):(p[t]=0,p[t+"Count"]=0)}),$.each(g,function(e,t){var i=Enumerable.From(n).Where("$.MonthOfYear=="+m+' && $.Airport=="'+t+'"').FirstOrDefault();i?(p[t]=i.Delay,p[t+"Count"]=i.Count):(p[t]=0,p[t+"Count"]=0),$.each(c,function(e,i){var a=Enumerable.From(s).Where("$.MonthOfYear=="+m+' && $.Category=="'+i+'" && $.Airport=="'+t+'"').FirstOrDefault();a?(p[t+"-"+i]=a.Delay,p[t+"-"+i+"Count"]=a.Count):(p[t+"-"+i]=0,p[t+"-"+i+"Count"]=0)})}),e.lineYearCatDs.push(p);for(var h=1;h<=4;h++){var f={Month:"M"+m.toString()+"W"+h.toString()};$.each(c,function(e,t){var i=Enumerable.From(o).Where("$.MonthOfYear=="+m+" && $.WeekOfMonth=="+h+' && $.Category=="'+t+'"').FirstOrDefault();i?(f[t]=i.Delay,f[t+"Count"]=i.Count):(f[t]=0,f[t+"Count"]=0)}),$.each(g,function(e,t){var i=Enumerable.From(l).Where("$.MonthOfYear=="+m+" && $.WeekOfMonth=="+h+' && $.Airport=="'+t+'"').FirstOrDefault();i?(f[t]=i.Delay,f[t+"Count"]=i.Count):(f[t]=0,f[t+"Count"]=0),$.each(c,function(e,i){var a=Enumerable.From(r).Where("$.MonthOfYear=="+m+' && $.Category=="'+i+'" && $.Airport=="'+t+'" && $.WeekOfMonth=='+h).FirstOrDefault();a?(f[t+"-"+i]=a.Delay,f[t+"-"+i+"Count"]=a.Count):(f[t+"-"+i]=0,f[t+"-"+i+"Count"]=0)})}),e.lineYearWeekCatDs.push(f)}}console.log(e.lineYearCatDs),e.isMainVisible=!0})},e.btn_search={type:"success",icon:"search",width:35,validationGroup:"dlasearch",bindingOptions:{},onClick:function(t){e.dg_dla_ds=null,e.doRefresh=!0,e.binddla()}},e.btn_date={type:"default",icon:"event",width:35,bindingOptions:{},onClick:function(t){e.popup_date_visible=!0}},e.btn_info={type:"default",icon:"fas fa-exclamation",width:35,bindingOptions:{},onClick:function(t){e.dt_from=new Date(e.dt_from1),e.dt_to=new Date(e.dt_to1),e.popup_detail_visible=!0}},e.dp_year1={},e.dp_year2={},e.selected_employee_id=null,e.btn_filter={text:"",type:"default",icon:"filter",width:40,onClick:function(t){e.filterVisible?(e.filterVisible=!1,$(".filter").fadeOut()):(e.filterVisible=!0,$(".filter").fadeIn())}},e.loadingVisible=!1,e.loadPanel={message:"Please wait...",showIndicator:!0,showPane:!0,shading:!0,closeOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",onShown:function(){},onHidden:function(){},bindingOptions:{visible:"loadingVisible"}},e.dt_from=(new Date).addDays(-30),e.dt_to=new Date,e.date_from={adaptivityEnabled:!0,type:"date",placeholder:"From",width:125,useMaskBehavior:!0,bindingOptions:{value:"dt_from"}},e.date_to={adaptivityEnabled:!0,type:"date",placeholder:"To",width:125,useMaskBehavior:!0,bindingOptions:{value:"dt_to"}},e.dt_from1=(new Date).addDays(-30),e.dt_to1=new Date,e.date_from1={adaptivityEnabled:!0,type:"date",placeholder:"From",width:125,useMaskBehavior:!0,bindingOptions:{value:"dt_from1"}},e.date_to1={adaptivityEnabled:!0,type:"date",placeholder:"To",width:125,useMaskBehavior:!0,bindingOptions:{value:"dt_to1"}},e.doRefresh=!0,e.dg_dla_columns=[{cellTemplate:function(e,t){$("<div style='text-align:center'/>").html(t.rowIndex+1).appendTo(e)},name:"row",caption:"#",width:70,fixed:!0,fixedPosition:"left",allowResizing:!1,cssClass:"rowHeader"},{dataField:"Date",caption:"Date",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:120,format:"yy-MMM-dd",sortIndex:0,sortOrder:"asc",fixed:!0,fixedPosition:"left"},{dataField:"PDate",caption:"P. Date",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95,fixed:!0,fixedPosition:"left"},{dataField:"PMonthName",caption:"P. Month",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95,fixed:!0,fixedPosition:"left"},{dataField:"FlightNumber",caption:"Flight No",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:80,fixed:!1,fixedPosition:"left",fixed:!0,fixedPosition:"left"},{dataField:"FromAirportIATA",caption:"From",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100},{dataField:"ToAirportIATA",caption:"To",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100},{dataField:"STDLocal",caption:"Sch. Dep.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:115,format:"HH:mm"},{dataField:"STALocal",caption:"Sch. Arr.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:115,format:"HH:mm"},{dataField:"DepartureLocal",caption:"Dep.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:90,format:"HH:mm",sortIndex:2,sortOrder:"asc"},{dataField:"ArrivalLocal",caption:"Arr.",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:90,format:"HH:mm"},{dataField:"Register",caption:"Reg",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:110,sortIndex:1,sortOrder:"asc"},{dataField:"FlightTime2",caption:"Flight Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:120,fixed:!1,fixedPosition:"right"},{dataField:"BlockTime2",caption:"Block Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100,fixed:!1,fixedPosition:"right"},{dataField:"Code",caption:"Code",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:70,fixed:!1,fixedPosition:"left",fixed:!1,fixedPosition:"left"},{dataField:"ICategory",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,width:150,fixed:!1,fixedPosition:"left",fixed:!1,fixedPosition:"left"},{dataField:"Remark",caption:"Remark",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,width:500,fixed:!1,fixedPosition:"left",fixed:!1,fixedPosition:"left"},{dataField:"Delay2",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100,fixed:!0,fixedPosition:"right"}],e.dg_dla_selected=null,e.dg_dla_instance=null,e.dg_dla_ds=null,e.dg_dla={wordWrapEnabled:!0,rowAlternationEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,height:$(window).height()-170,columns:e.dg_dla_columns,onContentReady:function(t){e.dg_dla_instance||(e.dg_dla_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_dla_selected=i||null},summary:{totalItems:[{column:"row",summaryType:"count",customizeText:function(e){return Number(e.value).toFixed(0)}},{name:"DelayTotal",showInColumn:"Delay2",displayFormat:"{0}",summaryType:"custom"}],calculateCustomSummary:function(e){"ActualFlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTimeActual,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"ActualFlightTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTimeActual,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FlightTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"DelayTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.Delay,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"FlightTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.FlightTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),
"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"SITATimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.SITATime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"BlockTimeTotal"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue=""),"calculate"===e.summaryProcess&&(e.totalValueMinutes=e.totalValueMinutes+e.value.BlockTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString())),"BlockTimeAvg"===e.name&&("start"===e.summaryProcess&&(e.totalValueMinutes=0,e.totalValue="",e.cnt=0),"calculate"===e.summaryProcess&&(e.cnt++,e.totalValueMinutes=e.totalValueMinutes+e.value.BlockTime,e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()),"finalize"===e.summaryProcess&&(e.totalValueMinutes=Math.round(e.totalValueMinutes/e.cnt),e.totalValue=pad(Math.floor(e.totalValueMinutes/60)).toString()+":"+pad(e.totalValueMinutes%60).toString()))}},export:{enabled:!0,fileName:"Delays_Report",allowExportSelectedData:!1},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"before",template:function(){return $("<div/>").append("<span style='color:white;'>Delays</span>")}})},onExporting:function(e){e.component.beginUpdate(),e.component.columnOption("row","visible",!1)},onExported:function(e){e.component.columnOption("row","visible",!0),e.component.endUpdate()},onRowPrepared:function(e){e.data&&e.data.IsPositioning&&e.rowElement.css("background","#ffccff")},bindingOptions:{dataSource:"dg_dla_ds"},columnChooser:{enabled:!1}},e.binddla=function(){var t=[];if(e.dt_to1){var i=moment(e.dt_to1).format("YYYY-MM-DDTHH:mm:ss");t.push("dt="+i)}if(e.dt_from1){var n=moment(e.dt_from1).format("YYYY-MM-DDTHH:mm:ss");t.push("df="+n)}var o=t.join("&"),l="odata/delays2";o&&(l+="?"+o),e.dg_dla_ds||(e.dg_dla_ds={store:{type:"odata",url:a.serviceUrl+l,key:"ID",version:4,onLoaded:function(t){$.each(t,function(t,i){i.FlightTime2=e.formatMinutes(i.FlightTime),i.BlockTime2=e.formatMinutes(i.BlockTime),i.Delay2=e.formatMinutes(i.Delay)}),a.$broadcast("OnDataLoaded",null)},beforeSend:function(e){}}}),e.doRefresh&&(e.dg_dla_instance.refresh(),e.doRefresh=!1)},$(window).on("resize",function(){e.$apply(function(){e.resize()})}),e.scroll_main={scrollByContent:!0,scrollByThumb:!0,bindingOptions:{height:"scroll_height"}},e.scroll_det1={scrollByContent:!0,scrollByThumb:!0,bindingOptions:{height:"scroll_height_detd"}},e.scroll_det2={scrollByContent:!0,scrollByThumb:!0,bindingOptions:{height:"scroll_height_detd"}},e.scroll_det3={scrollByContent:!0,scrollByThumb:!0,bindingOptions:{height:"scroll_height_detd"}},e.filters=[],e.dg_cat_columns=[{dataField:"Category",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width:90,alignment:"center"},{dataField:"DelayFormatted",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:100}],e.dg_cat_selected=null,e.dg_cat_instance=null,e.dg_cat_ds=null,e.dg_cat_height=250,e.dg_cat={wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_cat_columns,onContentReady:function(t){e.dg_cat_instance||(e.dg_cat_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_cat_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"Category"==t.column.dataField){var i=e.data.categoryColors[t.data.Category];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{name:"DelayTotal",showInColumn:"DelayFormatted",summaryType:"custom"}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_cat_ds",height:"dg_cat_height"}},e.dg_cat_det_columns=[{dataField:"ICategory",caption:"Category",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150,sortIndex:0,sortOrder:"asc"},{dataField:"STDDay",caption:"Date",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:95,format:"MM/dd/yyyy",sortIndex:1,sortOrder:"asc"},{dataField:"PDate",caption:"P. Date",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"FlightNumber",caption:"Flight",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"FromAirportIATA",caption:"From",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:85},{dataField:"ToAirportIATA",caption:"To",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:85},{dataField:"Register",caption:"Register",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:80},{dataField:"DelayRemark",caption:"Remark",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1}],e.dg_cat_det_selected=null,e.dg_cat_det_instance=null,e.dg_cat_det_ds=null,e.dg_cat_det={wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!0,columns:e.dg_cat_det_columns,onContentReady:function(t){e.dg_cat_det_instance||(e.dg_cat_det_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_cat_det_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"ICategory"==t.column.dataField){var i=e.data.categoryColors[t.data.ICategory];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{name:"DelayTotal",showInColumn:"Delay",summaryType:"custom"}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_cat_det_ds",height:"dg_cat_height"}},e.dg_air_columns=[{dataField:"Airport",caption:"A/P",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width:70,alignment:"center"},{dataField:"DelayFormatted",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:90}],e.dg_air_selected=null,e.dg_air_instance=null,e.dg_air_ds=null,e.dg_air={wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_air_columns,onContentReady:function(t){e.dg_air_instance||(e.dg_air_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_air_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"Airport"==t.column.dataField){var i=e.data.airportColors[t.data.Airport];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{name:"DelayTotal",showInColumn:"DelayFormatted",summaryType:"custom"}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_air_ds",height:"dg_cat_height"}},e.dg_airc_columns=[{dataField:"Airport",caption:"A/P",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc"},{dataField:"Category",caption:"CAT",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc"},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width:70,alignment:"center"},{dataField:"DelayFormatted",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:90}],e.dg_airc_selected=null,e.dg_airc_instance=null,e.dg_airc_ds=null,e.dg_airc={wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_airc_columns,onContentReady:function(t){e.dg_airc_instance||(e.dg_airc_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_airc_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"Airport"==t.column.dataField){var i=e.data.airportColors[t.data.Airport];t.cellElement.css("backgroundColor",i)}if("data"===t.rowType&&"Category"==t.column.dataField){var i=e.data.categoryColors[t.data.Category];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{name:"DelayTotal",showInColumn:"DelayFormatted",summaryType:"custom"}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_airc_ds",height:"dg_cat_height"}},e.dg_air_det_columns=[{dataField:"FromAirportIATA",caption:"Airport",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150,sortIndex:0,sortOrder:"asc"},{dataField:"ICategory",caption:"Category",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:150,sortIndex:1,sortOrder:"asc"},{dataField:"STDDay",caption:"Date",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width:95,format:"MM/dd/yyyy",sortIndex:2,sortOrder:"asc"},{dataField:"PDate",caption:"P. Date",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"FlightNumber",caption:"Flight",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"ToAirportIATA",caption:"To",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:85},{dataField:"Register",caption:"Register",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width:95},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"number",allowEditing:!1,width:80},{dataField:"DelayRemark",caption:"Remark",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1}],e.dg_air_det_selected=null,e.dg_air_det_instance=null,e.dg_air_det_ds=null,e.dg_air_det={wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!0,columns:e.dg_air_det_columns,onContentReady:function(t){e.dg_air_det_instance||(e.dg_air_det_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_air_det_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"ICategory"==t.column.dataField){var i=e.data.categoryColors[t.data.ICategory];t.cellElement.css("backgroundColor",i)}if("data"===t.rowType&&"FromAirportIATA"==t.column.dataField){var i=e.data.airportColors[t.data.FromAirportIATA];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{name:"DelayTotal",showInColumn:"Delay",summaryType:"custom"}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_air_det_ds",height:"dg_cat_height"}},e.showDetail=function(t){var i=t.data;e.dt_from=new Date(i.DateFrom),e.dt_to=new Date(i.DateTo),e.popup_detail_visible=!0},e.dg_year_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"MonthFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"MonthTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"MonthFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,hidingPriority:0,visible:!1},{dataField:"MonthToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,hidingPriority:1,visible:!1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center"},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}},{dataField:"DelayLeg",caption:"D/L Leg",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:7},{dataField:"DelayRatio",caption:"D/L Ratio",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(e){return Math.floor(e.value)+"%"},hidingPriority:8},{dataField:"Title",caption:"",width:55,allowFiltering:!1,allowSorting:!1,cellTemplate:"detailTemplate"}],e.dg_year_selected=null,e.dg_year_instance=null,e.dg_year_ds=null,e.dg_year_height=350,e.dg_year={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_year_columns,onContentReady:function(t){e.dg_year_instance||(e.dg_year_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_year_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"Category"==t.column.dataField){var i=e.data.categoryColors[t.data.Category];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_year_ds",height:"dg_year_height"}},e.dg_yearcat_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:120},{dataField:"Category",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:2,sortOrder:"asc"},{dataField:"MonthFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"MonthTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"MonthFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"MonthToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearcat_selected=null,e.dg_yearcat_instance=null,e.dg_yearcat_ds=null,e.dg_yearcat_height=350,e.dg_yearcat={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearcat_columns,onContentReady:function(t){e.dg_yearcat_instance||(e.dg_yearcat_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearcat_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.categories",height:"dg_yearcat_height"}},e.dg_yearapt_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"Airport",caption:"Airport",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:1,sortOrder:"asc"},{dataField:"MonthFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"MonthTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"MonthFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"MonthToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearapt_selected=null,e.dg_yearapt_instance=null,e.dg_yearapt_ds=null,e.dg_yearapt_height=350,e.dg_yearapt={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearapt_columns,onContentReady:function(t){e.dg_yearapt_instance||(e.dg_yearapt_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearapt_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.airports",height:"dg_yearapt_height"}},e.dg_yearaptcat_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"Airport",caption:"Airport",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:1,sortOrder:"asc"},{dataField:"Category",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:2,sortOrder:"asc"},{dataField:"MonthFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"MonthTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"MonthFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"MonthToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearaptcat_selected=null,e.dg_yearaptcat_instance=null,e.dg_yearaptcat_ds=null,e.dg_yearaptcat_height=350,e.dg_yearaptcat={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearaptcat_columns,onContentReady:function(t){e.dg_yearaptcat_instance||(e.dg_yearaptcat_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearaptcat_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.airportsCategories",height:"dg_yearaptcat_height"}},e.dg_yearweek_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"WeekFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"WeekTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"WeekFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"WeekToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}},{dataField:"DelayLeg",caption:"D/L Leg",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:9},{dataField:"DelayRatio",caption:"D/L Ratio",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(e){return Math.floor(e.value)+"%"},hidingPriority:8},{dataField:"Title",caption:"",width:65,allowFiltering:!1,allowSorting:!1,cellTemplate:"detailTemplate"}],e.dg_yearweek_selected=null,e.dg_yearweek_instance=null,e.dg_yearweek_ds=null,e.dg_yearweek_height=350,e.dg_yearweek={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearweek_columns,onContentReady:function(t){e.dg_yearweek_instance||(e.dg_yearweek_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearweek_selected=i||null},onCellPrepared:function(t){if("data"===t.rowType&&"Category"==t.column.dataField){var i=e.data.categoryColors[t.data.Category];t.cellElement.css("backgroundColor",i)}},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dg_yearweek_ds",height:"dg_yearweek_height"}},e.dg_yearweekcat_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:120},{dataField:"Category",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:3,sortOrder:"asc"},{dataField:"WeekFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"WeekTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"WeekFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"WeekToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center"},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearweekcat_selected=null,e.dg_yearweekcat_instance=null,e.dg_yearweekcat_ds=null,e.dg_yearweekcat_height=350,e.dg_yearweekcat={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",
allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearweekcat_columns,onContentReady:function(t){e.dg_yearweekcat_instance||(e.dg_yearweekcat_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearweekcat_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.categoriesWeek",height:"dg_yearweek_height"}},e.dg_yearweekapt_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"Airport",caption:"Airport",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:2,sortOrder:"asc"},{dataField:"WeekFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"WeekTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"WeekFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"WeekToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearweekapt_selected=null,e.dg_yearweekapt_instance=null,e.dg_yearweekapt_ds=null,e.dg_yearweekapt_height=350,e.dg_yearweekapt={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearweekapt_columns,onContentReady:function(t){e.dg_yearweekapt_instance||(e.dg_yearweekapt_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearweekapt_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.airportsWeek",height:"dg_yearweekapt_height"}},e.dg_yearweekaptcat_columns=[{dataField:"Title",caption:"Period",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:0,sortOrder:"asc",width:100},{dataField:"Airport",caption:"Airport",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,sortIndex:1,sortOrder:"asc"},{dataField:"Category",caption:"Category",allowResizing:!0,alignment:"left",dataType:"string",allowEditing:!1,sortIndex:2,sortOrder:"asc"},{dataField:"WeekFrom",caption:"From",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:2},{dataField:"WeekTo",caption:"To",allowResizing:!0,alignment:"center",dataType:"datetime",allowEditing:!1,width1:95,format:"MM/dd/yyyy",hidingPriority:3},{dataField:"WeekFromPersian",caption:"From(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:0},{dataField:"WeekToPersian",caption:"To(P)",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:95,visible:!1,hidingPriority:1},{dataField:"FlightTime",caption:"F/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:4},{dataField:"BlockTime",caption:"B/L Time",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)},hidingPriority:5},{dataField:"TotalFlights",caption:"Legs",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:6},{dataField:"Count",caption:"Count",allowResizing:!0,dataType:"number",allowEditing:!1,width1:90,alignment:"center",hidingPriority:7},{dataField:"Delay",caption:"Delay",allowResizing:!0,alignment:"center",dataType:"string",allowEditing:!1,width1:100,customizeText:function(t){return e.formatMinutes(t.value)}}],e.dg_yearweekaptcat_selected=null,e.dg_yearweekaptcat_instance=null,e.dg_yearweekaptcat_ds=null,e.dg_yearweekaptcat_height=450,e.dg_yearweekaptcat={columnHidingEnabled:!0,wordWrapEnabled:!0,headerFilter:{visible:!1},filterRow:{visible:!0,showOperationChooser:!0},showRowLines:!0,showColumnLines:!0,sorting:{mode:"none"},noDataText:"",allowColumnReordering:!0,allowColumnResizing:!0,scrolling:{mode:"infinite"},paging:{pageSize:100},showBorders:!0,selection:{mode:"single"},columnAutoWidth:!1,columns:e.dg_yearweekaptcat_columns,onContentReady:function(t){e.dg_yearweekaptcat_instance||(e.dg_yearweekaptcat_instance=t.component)},onSelectionChanged:function(t){var i=t.selectedRowsData[0];e.dg_yearweekaptcat_selected=i||null},onCellPrepared:function(e){},summary:{totalItems:[{column:"Count",summaryType:"sum",customizeText:function(e){return e.value}},{column:"Delay",summaryType:"sum",customizeText:function(t){return e.formatMinutes(t.value)}}],calculateCustomSummary:function(t){"DelayTotal"===t.name&&("start"===t.summaryProcess&&(t.totalValueMinutes=0,t.totalValue=""),"calculate"===t.summaryProcess&&(t.totalValueMinutes=t.totalValueMinutes+t.value.Delay,t.totalValue=e.formatMinutes(t.totalValueMinutes)))}},bindingOptions:{dataSource:"dataYear.airportsCategoriesWeek",height:"dg_yearweekaptcat_height"}},e.diameter=.85,e.catColors=[],e.pie_cat_ds=[],e.pie_cat={onInitialized:function(t){e.pie_cat_instance||(e.pie_cat_instance=t.component)},type:"doughnut",legend:{horizontalAlignment:"right",verticalAlignment:"top",margin:0,visible:!1},series:[{argumentField:"Category",valueField:"Delay",label:{visible:!0,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText.substr(0,4)+" ("+e.percentText+")"}}}],size:{height:300},bindingOptions:{dataSource:"pie_cat_ds",palette:"catColors"}},e.pie_cat2={type:"doughnut",legend:{horizontalAlignment:"right",verticalAlignment:"top",margin:0,visible:!1},series:[{argumentField:"category",valueField:"sum",label:{visible:!1,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText.substr(0,4)+" ("+e.percentText+")"}}}],size:{height:300},bindingOptions:{}},e.pie_air_ds=[],e.pie_air={type:"doughnut",legend:{horizontalAlignment:"right",verticalAlignment:"top",margin:0,visible:!1},series:[{argumentField:"Airport",valueField:"Delay",label:{visible:!0,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText.substr(0,4)+" ("+e.percentText+")"}}}],size:{height:300},bindingOptions:{dataSource:"pie_air_ds",palette:"airColors"}},e.barWidth=50,e.bar_cat_ds=[],e.bar_cat_ins=null,e.bar_cat={onInitialized:function(t){e.bar_cat_instance||(e.bar_cat_instance=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},onInitialized:function(t){e.bar_cat_ins||(e.bar_cat_ins=t.component)},commonSeriesSettings:{},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],legend:{visible:!1,backgroundColor:"transparent",margin:5},series:[{type:"bar",argumentField:"Category",valueField:"Delay",name:"Delay(mm)",label:{backgroundColor:"gray",color:"#fff",customizeText:function(){return e.formatMinutes(this.value)},visible:!0}}],customizePoint:function(){var t=this.argument;return{color:e.data.categoryColors[t],hoverStyle:{color:"#bbb"}}},size:{height:300,width:"100%"},bindingOptions:{dataSource:"bar_cat_ds",palette:"catColors","commonSeriesSettings.barWidth":"barWidth"}},e.barMax=0,e.bar_airc_series=[],e.bar_cata_series=[],e.bar_airc={argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Airport",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],bindingOptions:{dataSource:"bar_airc_ds","commonSeriesSettings.barWidth":"barWidth",series:"bar_airc_series"}},e.bar_cata={argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Category",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],bindingOptions:{dataSource:"bar_cata_ds","commonSeriesSettings.barWidth":"barWidth",series:"bar_cata_series"}},e.line_daily={palette:"Violet",onInitialized:function(t){e.line_daily_instance||(e.line_daily_instance=t.component)},commonSeriesSettings:{argumentField:"Date",width:4},crosshair:{enabled:!0,color:"#949494",width:2,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},series:[{valueField:"Delay",name:"Daily",color:"red"},{valueField:"TRND",name:"Trend",width:2,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1}}],bindingOptions:{dataSource:"data.delaysTotal"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays",font:{size:20}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:-1!=t.seriesName.indexOf("Trend")?"":t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Count:"+t.point.data.Count}}},size:{height:550,width:"100%"}},e.line_dailydl={onInitialized:function(t){e.line_dailydl_instance||(e.line_dailydl_instance=t.component)},palette:"Harmony Light",size:{height:550},commonSeriesSettings:{argumentField:"Date"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},series:[{valueField:"DelayLeg",name:"Delay/Leg",pane:"topPane",width:4},{valueField:"TRNDLeg",name:"Trend",width:2,color:"#660000",dashStyle:"dot",label:{visible:!1},point:{visible:!1},pane:"topPane"},{valueField:"DelayRatio",name:"Delay Ratio",pane:"middlePane"},{valueField:"TotalFlights",name:"Legs",pane:"bottomPane"}],bindingOptions:{dataSource:"data.delaysTotal"},panes:[{name:"topPane",height:250,border:{visible:!0}},{name:"middlePane",height:150,border:{visible:!0}},{name:"bottomPane",height:150,border:{visible:!0}}],defaultPane:"bottomPane",argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},valueAxis:[{pane:"middlePane",grid:{visible:!0},title:{text:"Delay Ratio",margin:12},label:{customizeText:function(){return this.value+"%"}}},{pane:"bottomPane",grid:{visible:!0},title:{text:"Legs",margin:12},label:{customizeText:function(){return this.value}}},{pane:"topPane",grid:{visible:!0},title:{text:"Delay/Leg"},label:{customizeText:function(){return e.formatMinutes(this.value)}}}],legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},export:{enabled:!1},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:-1!=t.seriesName.indexOf("Ratio")?t.seriesName+", "+t.argument+": "+Math.floor(t.value)+"%, Block Time:"+t.point.data.BL:-1==t.seriesName.indexOf("Legs")?t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Legs:"+t.point.data.Legs:t.point.data.Legs}}}},e.line_year={palette:"Violet",commonSeriesSettings:{argumentField:"Month",width:5},crosshair:{enabled:!0,color:"#949494",width:2,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},bindingOptions:{dataSource:"lineYearDs",series:"lineYearSeries","size.height":"height550"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",visible:!1},title:{text:"Total Delays",font:{size:20},subtitle:{text:"28-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:-1!=t.seriesName.indexOf("Trend")?"":t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Count:"+t.point.data.Count}}}},e.line_yeardl={palette:"Harmony Light",size:{height:550},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},bindingOptions:{dataSource:"lineYearDs",series:"lineYearDLSeries"},panes:[{name:"topPane",height:250,border:{visible:!0}},{name:"middlePane",height:150,border:{visible:!0}},{name:"bottomPane",height:150,border:{visible:!0}}],defaultPane:"bottomPane",argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},valueAxis:[{pane:"middlePane",grid:{visible:!0},title:{text:"Delay Ratio",margin:12,font:{size:13}},label:{customizeText:function(){return this.value+"%"}}},{pane:"bottomPane",grid:{visible:!0},title:{text:"Legs",margin:12,font:{size:13}},label:{customizeText:function(){return this.value}}},{pane:"topPane",grid:{visible:!0},title:{text:"Delay/Leg",font:{size:13}},label:{customizeText:function(){return e.formatMinutes(this.value)}}}],legend:{verticalAlignment:"bottom",horizontalAlignment:"center",visible:!1},export:{enabled:!1},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:-1!=t.seriesName.indexOf("Ratio")?t.seriesName+", "+t.argument+": "+Math.floor(t.value)+"%, Block Time:"+t.point.data.BL:-1==t.seriesName.indexOf("Legs")?t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Legs:"+t.point.data.Legs:t.point.data.Legs}}}},e.line_yearcat_instance=null,e.line_daycat_instance=null,e.line_yearcatmonth_instance=null,e.line_yearcatweek_instance=null,e.bar_yearcat_instance=null,e.bar_daycat_instance=null,e.line_yearweekcat_instance=null,e.bar_yearweekcat_instance=null,e.line_yearcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearcat_instance||(e.line_yearcat_instance=t.component)},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Category",font:{size:20},subtitle:{text:"28-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500},bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearCatSeries"}},e.line_daycat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_daycat_instance||(e.line_daycat_instance=t.component)},commonSeriesSettings:{argumentField:"Date"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Category",font:{size:20}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500},bindingOptions:{dataSource:"data.dailyCatsTbl",series:"lineDayCatSeries"}},e.selectedCat=null,e.catMonthDs=null,e.catWeekDs=null,e.sb_cat={onValueChanged:function(t){e.catMonthDs=Enumerable.From(e.categories2).Where('$.Category=="'+t.value+'"').ToArray(),e.selectedMonth?e.catWeekDs=Enumerable.From(e.categoriesWeek2).Where('$.Category=="'+t.value+'"  && $.Month=='+e.selectedMonth.Month).ToArray():e.catWeekDs=null},bindingOptions:{dataSource:"catDs",value:"selectedCat"}},e.selectedMonth=null,e.sb_month={onValueChanged:function(t){e.selectedCat?e.catWeekDs=Enumerable.From(e.categoriesWeek2).Where('$.Category=="'+e.selectedCat+'" && $.Month=='+t.value.Month).ToArray():e.catWeekDs=null},displayExpr:"Title",bindingOptions:{dataSource:"monthDs",value:"selectedMonth"}},e.pie_catweek={type:"doughnut",legend:{horizontalAlignment:"right",verticalAlignment:"top",margin:0,visible:!1},series:[{argumentField:"Title",valueField:"Delay",label:{visible:!0,font:{size:11,color:"black"},connector:{visible:!0},customizeText:function(e){return e.argumentText+" ("+e.percentText+")"}}}],size:{height:450},bindingOptions:{dataSource:"catWeekDs"}},e.line_yearcatmonth={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearcatmonth_instance||(e.line_yearcatmonth_instance=t.component)},commonSeriesSettings:{argumentField:"Title"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},commonPaneSettings:{border:{visible:!0}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)}}},size:{height:435},series:[{valueField:"Delay",name:"Delay"}],bindingOptions:{dataSource:"catMonthDs"}},e.line_yearcatweek={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearcatweek_instance||(e.line_yearcatweek_instance=t.component)},commonSeriesSettings:{argumentField:"Title"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},commonPaneSettings:{border:{visible:!0}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)}}},size:{height:435},series:[{valueField:"Delay",name:"Delay"}],bindingOptions:{dataSource:"catWeekDs"}},e.line_yearapt_instanse=null,e.line_yearapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearapt_instanse||(e.line_yearapt_instanse=t.component)},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport",font:{size:20},subtitle:{text:"28-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearAptSeries","size.height":"height550"}},e.line_dayapt_instanse=null,e.line_dayapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_dayapt_instanse||(e.line_dayapt_instanse=t.component)},commonSeriesSettings:{argumentField:"Date"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport",font:{size:20}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500},bindingOptions:{dataSource:"data.dailyAirportsTbl",series:"lineDayAptSeries"}},e.bar_dayapt_instanse=null,e.bar_dayapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_dayapt_instanse||(e.bar_dayapt_instanse=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Date",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500},bindingOptions:{dataSource:"data.dailyAirportsTbl",series:"lineDayAptSeries"}},e.largeChartWidth="100%";e.line_yearaptcat_instanse=null,e.line_yearaptcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearaptcat_instanse||(e.line_yearaptcat_instanse=t.component)},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport-Categories",font:{size:20},subtitle:{text:"28-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500,width:e.largeChartWidth},bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearAptCatSeries"}},e.line_dayaptcat_instanse=null,e.line_dayaptcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_dayaptcat_instanse||(e.line_dayaptcat_instanse=t.component)},commonSeriesSettings:{argumentField:"Date"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport-Categories",font:{size:20}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500,width:"100%"},bindingOptions:{dataSource:"data.airportCategoryDailyTbl",series:"lineDayAptCatSeries"}},e.line_yearaptcatweek={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearaptcat_instanse||(e.line_yearaptcat_instanse=t.component)},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport-Categories",font:{size:20},subtitle:{text:"7-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500,width:e.largeChartWidth},bindingOptions:{dataSource:"lineYearWeekCatDs",series:"lineYearAptCatSeries"}},e.line_yearweekcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",commonSeriesSettings:{argumentField:"Month"},onInitialized:function(t){e.line_yearweekcat_instance||(e.line_yearweekcat_instance=t.component)},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Category",font:{size:20},subtitle:{text:"7-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},size:{height:500},bindingOptions:{dataSource:"lineYearWeekCatDs",series:"lineYearCatSeries"}},e.line_yearweekapt_instanse=null,e.line_yearweekapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.line_yearweekapt_instanse||(e.line_yearweekapt_instanse=t.component)},commonSeriesSettings:{argumentField:"Month"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},title:{text:"Total Delays By Airport",font:{size:20},subtitle:{text:"7-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", Delay: "+e.formatMinutes(t.value)+", Count:"+t.point.data[t.seriesName+"Count"]}}},bindingOptions:{dataSource:"lineYearWeekCatDs",series:"lineYearAptSeries","size.height":"height550"}},e.bar_yearcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_yearcat_instance||(e.bar_yearcat_instance=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Month",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500},bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearCatSeries"}},e.bar_daycat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_daycat_instance||(e.bar_daycat_instance=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Date",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500,width:"100%"},bindingOptions:{dataSource:"data.dailyCatsTbl",series:"lineDayCatSeries"}},e.bar_yearcatmonth_instance=null,e.bar_yearcatmonth={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){
e.bar_yearcatmonth_instance||(e.bar_yearcatmonth_instance=t.component)},commonPaneSettings:{border:{visible:!0}},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Category",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500},bindingOptions:{dataSource:"dataYear.categoriesTbl",series:"lineYearCatMonthSeries"}},e.bar_yearapt_instanse=null,e.bar_yearapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_yearapt_instanse||(e.bar_yearapt_instanse=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Month",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearAptSeries","size.height":"height550"}},e.bar_yearaptcat_instanse=null,e.bar_yearaptcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_yearaptcat_instanse||(e.bar_yearaptcat_instanse=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Month",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],bindingOptions:{dataSource:"lineYearCatDs",series:"lineYearAptCatSeries","size.height":"height550"}},e.bar_dayaptcat_instanse=null,e.bar_dayaptcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_dayaptcat_instanse||(e.bar_dayaptcat_instanse=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate",customizeText:function(e){return moment(new Date(e.value)).format("YY-MM-DD")}},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Date",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500},bindingOptions:{dataSource:"data.airportCategoryDailyTbl",series:"lineDayAptCatSeries"}},e.bar_yearweekcat={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_yearweekcat_instance||(e.bar_yearweekcat_instance=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Month",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],size:{height:500},bindingOptions:{dataSource:"lineYearWeekCatDs",series:"lineYearCatSeries"}},e.bar_yearweekapt_instanse=null,e.bar_yearweekapt={palette:"Dark Violet",paletteExtensionMode:"Alternate",onInitialized:function(t){e.bar_yearweekapt_instanse||(e.bar_yearweekapt_instanse=t.component)},argumentAxis:{label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},commonSeriesSettings:{argumentField:"Month",type:"stackedBar",label:{position:"outside",color:"black",font:{color:"black",size:11},customizeText:function(){return e.formatMinutes(this.value)},visible:!1},barWidth:30},legend:{verticalAlignment:"bottom",horizontalAlignment:"center"},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+" "+e.formatMinutes(t.value)}}},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],bindingOptions:{dataSource:"lineYearWeekCatDs",series:"lineYearAptSeries","size.height":"height550"}},e.pie_yearcat={palette:"ocean",type:"doughnut",legend:{visible:!0},innerRadius:.2,commonSeriesSettings:{label:{visible:!1}},tooltip:{enabled:!0,format:"currency",customizeTooltip:function(){return{text:this.argumentText+"<br>"+this.seriesName+": "+this.valueText+"B"}}},export:{enabled:!1},bindingOptions:{dataSource:"lineYearCatDs",series:"pieYearCatSeries"}},e.line_yearweek={palette:"Carmine",commonSeriesSettings:{argumentField:"Week"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},bindingOptions:{dataSource:"lineYearWeekDs",series:"lineYearWeekSeries","size.height":"height550"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",visible:!1},title:{text:"Total Delays",font:{size:20},subtitle:{text:"7-Day Period"}},export:{enabled:!1},valueAxis:[{label:{customizeText:function(){return e.formatMinutes(this.value)}}}],tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Count:"+t.point.data.Count}}}},e.line_yearweekdl={palette:"Carmine",size:{height:550},commonSeriesSettings:{argumentField:"Week"},crosshair:{enabled:!0,color:"#949494",width:3,dashStyle:"dot",label:{visible:!0,backgroundColor:"#949494",font:{color:"#fff",size:12}}},bindingOptions:{dataSource:"lineYearWeekDs",series:"lineYearWeekDLSeries"},panes:[{name:"topPane",border:{visible:!0}},{name:"middlePane",border:{visible:!0}},{name:"bottomPane",border:{visible:!0}}],defaultPane:"bottomPane",argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!1},label:{rotationAngle:-45,overlappingBehavior:"rotate"},overlappingBehavior:"rotate"},valueAxis:[{pane:"bottomPane",grid:{visible:!0},title:{text:"Legs",margin:12,font:{size:13}},label:{customizeText:function(){return this.value}}},{pane:"middlePane",grid:{visible:!0},title:{text:"Delay Ratio",margin:12,font:{size:13}},label:{customizeText:function(){return this.value+"%"}}},{pane:"topPane",grid:{visible:!0},title:{text:"Delay/Leg",font:{size:13}},label:{customizeText:function(){return e.formatMinutes(this.value)}}}],legend:{verticalAlignment:"bottom",horizontalAlignment:"center",visible:!1},export:{enabled:!1},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(t){return{text:-1!=t.seriesName.indexOf("Ratio")?t.seriesName+", "+t.argument+": "+Math.floor(t.value)+"%, Block Time:"+t.point.data.BL:t.seriesName+", "+t.argument+": "+e.formatMinutes(t.value)+", Legs:"+t.point.data.Legs}}}},e.popup_detail_visible=!1,e.popup_detail_title="Details",e.popup_detail_first=!0,e.popup_detail={shading:!0,height:490,width:700,fullScreen:!0,showTitle:!0,dragEnabled:!0,toolbarItems:[{widget:"dxDateBox",location:"before",options:{adaptivityEnabled:!0,type:"date",placeholder:"From",width:125,useMaskBehavior:!0,elementAttr:{class:"dx-border"},onValueChanged:function(t){e.dt_from=t.value},bindingOptions:{value:"dt_from"}},toolbar:"bottom"},{widget:"dxDateBox",location:"before",options:{adaptivityEnabled:!0,type:"date",placeholder:"To",width:125,useMaskBehavior:!0,elementAttr:{class:"dx-border"},onValueChanged:function(t){e.dt_to=t.value},bindingOptions:{value:"dt_to"}},toolbar:"bottom"},{widget:"dxButton",location:"before",options:{type:"success",text:"",icon:"search",validationGroup:"fblink",bindingOptions:{disabled:"IsApproved"},onClick:function(t){e.dg_ds=null,e.bind()}},toolbar:"bottom"}],visible:!1,closeOnOutsideClick:!1,onTitleRendered:function(e){},onShowing:function(e){$(".tabcd").hide()},onShown:function(t){e.dg_ds=null,e.bind();var i=$(".accordion > dd").hide();$(".category").slideDown(500,"swing",function(){}),e.popup_detail_first&&($(".accordion > dt > a").click(function(){return i.slideUp(),$(this).parent().next().is(":visible")||$(this).parent().next().slideDown(500,"swing",function(){e.renderCharts()}),!1}),e.popup_detail_first=!1)},onHiding:function(){e.IsDetailVisible=!1,e.popup_link_visible=!1},showCloseButton:!0,bindingOptions:{visible:"popup_detail_visible",title:"popup_detail_title"}},e.popup_date_visible=!1,e.popup_date_title="Date Picker";var m=null,p=null;e.popup_date={title:"Date Picker",shading:!0,height:180,width:250,fullScreen:!1,showTitle:!0,dragEnabled:!0,visible:!1,closeOnOutsideClick:!1,onTitleRendered:function(e){},onShowing:function(e){},onShown:function(t){m=$(".date1").pDatepicker({format:"l",autoClose:!0,calendar:{persian:{locale:"en"}},onSelect:function(t){e.$apply(function(){e.dt_from1=new Date(t)})}}),m.setDate(new Date(e.dt_from1.getTime())),p=$(".date2").pDatepicker({format:"l",autoClose:!0,calendar:{persian:{locale:"en"}},onSelect:function(t){e.$apply(function(){e.dt_to1=new Date(t)})}}),p.setDate(new Date(e.dt_to1.getTime()))},onHiding:function(){m.destroy(),p.destroy(),e.popup_date_visible=!1},showCloseButton:!0,bindingOptions:{visible:"popup_date_visible"}},e.doRefresh=!1,e.getFilters=function(){var t=e.filters;return 0==t.length&&(t=[["Id",">",0]]),t},e.bind1=function(){var t=moment(e.dt_from).format("YYYY-MM-DDTHH:mm:ss"),i="odata/crew/report/main?date="+t;e.dg_ds||(e.dg_ds={store:{type:"odata",url:a.serviceUrl+i,key:"Id",version:4,onLoaded:function(e){a.$broadcast("OnDataLoaded",null)},beforeSend:function(t){e.dsUrl=General.getDsUrl(t),a.$broadcast("OnDataLoading",null)}}}),e.doRefresh&&(e.filters=e.getFilters(),e.dg_ds.filter=e.filters,e.dg_instance.refresh(),e.doRefresh=!1)},s.isAuthorized()?(a.page_title="> Delays",$(".statdelay").fadeIn(400,function(){e.bindYearly()})):s.redirectToLogin(),e.renderCharts=function(){e.bar_cat_ins&&e.bar_cat_ins.render(),e.bar_daycat_instance&&e.bar_daycat_instance.render(),e.line_dayaptcat_instanse&&e.line_dayaptcat_instanse.render(),e.bar_dayaptcat_instanse&&e.bar_dayaptcat_instanse.render()};var h=$(".accordion > dd").hide();$(".airport").slideDown(500,"swing",function(){e.renderCharts()}),$(".accordion > dt > a").click(function(){return h.slideUp(),$(this).parent().next().is(":visible")||$(this).parent().next().slideDown(500,"swing",function(){e.renderCharts()}),!1}),e.$on("getFilterResponse",function(t,i){e.filters=i,e.doRefresh=!0,e.bind()}),e.$on("onTemplateSearch",function(t,i){e.$broadcast("getFilterQuery",null)}),e.$on("onPersonSaved",function(t,i){e.doRefresh=!0}),e.$on("onPersonHide",function(t,i){e.bind()}),a.$broadcast("PersonLoaded",null)}]);