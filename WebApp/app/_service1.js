"use strict";app.factory("generalService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o=r.apiServiceBaseUri,s={},a=function(){return e.get(o+"odata/options/all/1").then(function(e){return console.log("orders"),console.log(e),e})},i=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/journals/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},c=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/option/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},u=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/journals/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/option/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return s.getOrders=a,s.saveOption=c,s.saveJournal=i,s.deleteJournal=u,s.deleteOption=f,s}]),app.factory("testService",["$http","ngAuthSettings",function(e,t){t.apiServiceBaseUri;return{}}]),app.factory("authInterceptorService",["$q","$injector","$location","localStorageService",function(e,t,r,n){var o={},s=function(e){e.headers=e.headers||{};var t=n.get("authorizationData");return t&&(e.headers.Authorization="Bearer "+t.token),e},a=function(o){if(401===o.status){var s=t.get("authService");n.get("authorizationData");s.logOut(),r.path("/login")}return e.reject(o)};return o.request=s,o.responseError=a,o}]),app.factory("organizationService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(){return e.get(serviceBase+"odata/options/all/1").then(function(e){return console.log("orders"),console.log(e),e})},a=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/organizations/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/organizations/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getOrders=s,o.save=a,o.delete=i,o}]),app.factory("weatherService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r,o){var s=t.defer();return e.get(n.serviceUrl+"odata/weather/current/"+r+"/"+o+"/").then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},a=function(r,o,s){var a=t.defer();return e.get(n.serviceUrl+"odata/weather/"+r+"/"+o+"/"+s+"/").then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},i=function(r,o){var s=t.defer();return e.get(n.serviceUrl+"odata/weather/flight/"+r+"/"+o+"/").then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},c=function(r){var o=t.defer();return e.get(n.serviceUrl+"odata/weather/flight/all/"+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},u=function(r,o){var s=t.defer();return e.get(n.serviceUrl+"odata/weather/current/hourly/"+r+"/"+o+"/").then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise};return o.getCurrent=s,o.getTime=a,o.getFlight=i,o.getCurrentHourly=u,o.getFlightAll=c,o}]),app.factory("personService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/employee/nid/"+n+"/"+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},a=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/employee/view/nid/"+n+"/"+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/group/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},c=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/group/code/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},u=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/employee/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/person/misc/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},d=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/matchinglist/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},g=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/person/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},l=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/person/misc/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},v=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/matchinglist/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getEmployee=s,o.getEmployeeForView=a,o.getEmployeesByGroupId=i,o.getEmployeesByGroupCode=c,o.save=u,o.saveMisc=f,o.saveMatchingList=d,o.delete=g,o.deleteMisc=l,o.deleteMatchingList=v,o}]),app.factory("libraryService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(){var r=t.defer();return e.get(serviceBase+"odata/library/keywords").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},a=function(r){var n=t.defer();return e.get(serviceBase+"odata/library/book/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},i=function(r){var n=t.defer();return e.get(serviceBase+"odata/library/book/files/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},c=function(r){var n=t.defer();return e.get(serviceBase+"odata/library/books/applicable/employees/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},u=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/library/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},f=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/library/exposed/"+r+"?orderby=DateExposure desc&top="+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},d=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/library/book/expose",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},g=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/library/move",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},l=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/library/book/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},v=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/library/book/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},p=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/base/library/folders/"+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},m=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/library/chapters/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},h=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/library/folders/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},M=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/library/folders/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},x=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/library/chapters/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.save=l,o.delete=v,o.saveFolder=h,o.saveChapter=m,o.exposeBook=d,o.move=g,o.getBook=a,o.getBookFiles=i,o.getPersonLibrary=u,o.getKeywords=s,o.getBookApplicableEmployees=c,o.getLastExposed=f,o.deleteFolder=M,o.deleteChapter=x,o.getFolders=p,o}]),app.factory("locationService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(t){return e.get(serviceBase+"odata/locations/customer/"+t+"?parentIds=-1&$orderby=FullCode").then(function(e){return e})},a=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/locations/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/locations/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getLocations=s,o.save=a,o.delete=i,o}]),app.factory("airportService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(){return e.get(serviceBase+"odata/options/all/1").then(function(e){return console.log("orders"),console.log(e),e})},a=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/airports/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/airports/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getOrders=s,o.save=a,o.delete=i,o}]),app.factory("ordersService",["$http","ngAuthSettings",function(e,t){var r=t.apiServiceBaseUri,n={},o=function(){return e.get(r+"odata/options/all/1").then(function(e){return console.log("orders"),console.log(e),e})};return n.getOrders=o,n}]),app.factory("flightService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/routes/airline/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},a=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/route/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flights/routes/destination/airline/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},c=function(r){var n=t.defer();return e.get(serviceBase+"odata/airport/iata/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},u=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flights/routes/averagetime/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},f=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/customer/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},d=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/box/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},g=function(r){var n=t.defer();return e.get(serviceBase+"odata/plan/checkerrors/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},l=function(r,n,o){var s=t.defer();return e.get(serviceBase+"odata/flights/grouped/"+r+"/"+n+"/"+o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},v=function(r,n,o,s,a){var i=t.defer();return e.get(serviceBase+"odata/flights/register/"+r+"/"+n+"/"+o+"/"+s+"/"+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},p=function(){var r=t.defer();return e.get(serviceBase+"odata/flights/delaycodes").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},m=function(){var r=t.defer();return e.get(serviceBase+"odata/flights/delaycodecats").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},h=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/delaycodes/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},M=function(r){var n=t.defer();return e.get(serviceBase+"odata/delays/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},x=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flights/updated/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},E=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/base/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},j=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/items/gantt/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},y=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/items/gantt/crewtest",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},B=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/items/gantt/crew/assign/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},U=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/last/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},D=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/last/id/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Y=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/items/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},w=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/items/id",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},k=function(r,n,o,s,a,i){var c=serviceBase+"odata/flights/gantt/customer/"+r+"/"+n+"/"+o+"/"+s;a&&(c+="/"+a);var u=t.defer();return e.post(c,i).then(function(e){u.resolve(e.data)},function(e,t){u.reject(Exceptions.getMessage(e))}),u.promise},S=function(r,n,o,s,a,i,c){var u=serviceBase+"odata/flights/gantt2/customer/"+r+"/"+n+"/"+o+"/"+s;a&&(u+="/"+a),u+="/"+i;var f=t.defer();return e.post(u,c).then(function(e){f.resolve(e.data)},function(e,t){f.reject(Exceptions.getMessage(e))}),f.promise},F=function(r,n,o,s){var a=serviceBase+"odata/flights/gantt/";o&&(a+="/"+o);var i=t.defer();return e.post(a,s).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},T=function(r,n,o,s,a,i){var c=serviceBase+"odata/plan/gantt/customer/"+r+"/"+n+"/"+o+"/"+s;a&&(c+="/"+a);var u=t.defer();return e.post(c,i).then(function(e){u.resolve(e.data)},function(e,t){u.reject(Exceptions.getMessage(e))}),u.promise},C=function(r){var n=-1*(new Date).getTimezoneOffset(),o=serviceBase+"odata/flight/"+r+"/"+n,s=t.defer();return e.get(o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},P=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flightplanitems/gantt/plan/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},b=function(r){var n=t.defer();return e.get(serviceBase+"odata/flightplan/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},R=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flight/plan/item/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},A=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/plan/item/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},I=function(r){var n=t.defer();return e.get(serviceBase+"odata/flightplan/view/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},H=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flightplan/summary/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},$=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flightplans/registers/assigned/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},N=function(r,n,o,s,a){var i=t.defer();return e.get(serviceBase+"odata/flightplan/register/overlaps/"+r+"/"+n+"/"+o+"/"+s+"/"+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},L=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flightplanitems/plan/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},z=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flights/plan/item/permits/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},q=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flights/plan/crew/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},O=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/plan/crew/box/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},_=function(r){var n=t.defer();return e.get(serviceBase+"odata/box/crew/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},G=function(r){var n=t.defer();return e.get(serviceBase+"odata/flight/crew/2/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},V=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/crew/report/flights/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},J=function(r,n){var o=moment(r).format("YYYY-MM-DDTHH:mm:ss"),s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=t.defer();return e.get(serviceBase+"odata/crew/report/flights/total/?from="+o+"&to="+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},K=function(r){var n=t.defer();return e.get(serviceBase+"odata/crew/summary/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Q=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},W=function(r,o){var s="odata/crew/cockpit/ordered/group/"+r;o||(s="odata/crew/cabin/ordered/group/"+r);var a=t.defer();return e.get(n.serviceUrl+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},X=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flights/plan/permits/"+r+"/"+n+"/").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Z=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/plan/permits/").then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},ee=function(r,n,o){var s=t.defer();return e.get(serviceBase+"odata/flights/abnormal/"+r+"/"+n+"/"+o+"/").then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},te=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/crew/rest/check/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},re=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/crew/rest/validation/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ne=function(r,n,o,s){var a=t.defer();return e.get(serviceBase+"odata/crew/over/"+r+"/"+n+"/"+o+"/"+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},oe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/calendar/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},se=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/plan/crew/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ae=function(r,o){var s=t.defer();e.post(n.serviceUrl+"odata/fdpitems/onoff",r).then(function(e){s.resolve(e.data),o&&o()},function(e,t){s.reject(Exceptions.getMessage(e))})},ie=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/items/box",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ce=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/fdp/create",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ue=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/items/unbox",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},fe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},de=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/register/assign",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ge=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/register/change",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},le=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/apply/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ve=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplanitems/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},pe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/editable/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},me=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flights/plan/item/permits/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},he=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/planitem/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Me=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/planitem/flight/update",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},xe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/planitems/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ee=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/planitem/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},je=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/planitem/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ye=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/plan/crew/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Be=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ue=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/box/crew/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},De=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/plan/register/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ye=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/plan/item/permit/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},we=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/registers/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ke=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/register/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Se=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/register/lock",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Fe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/register/unlock",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Te=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/plan/interval/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ce=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/registers/approve",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Pe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/calander/apply",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},be=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/close/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Re=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/approve/60/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ae=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/approve/70/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ie=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flightplan/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},He=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/departure/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},$e=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/log/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ne=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/delays/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Le=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/arrival/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},ze=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/offblock",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},qe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/reportingtime",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Oe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/onblock",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},_e=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/takeoff",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ge=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/landing",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ve=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/cancel",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Je=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/ramp",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ke=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/redirect",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Qe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/pax",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},We=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/cargo",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Xe=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/fuel/arrival",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ze=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/flight/fuel/departure",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},et=function(){var r=t.defer();return e.get(serviceBase+"odata/options/1156").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},tt=function(){var r=t.defer();return e.get(serviceBase+"odata/options/1159").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},rt=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/delays/total/code/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},nt=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/summary/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},ot=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/delays/total/source/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},st=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/delays/total/register/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},at=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/delays/total/route/"+r+"?from="+s+"&to="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),
i.promise},it=function(r,n,o,s){var a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=moment(s).format("YYYY-MM-DDTHH:mm:ss"),c=t.defer();return e.get(serviceBase+"odata/delays/details/code/"+r+"/"+n+"/?from="+a+"&to="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},ct=function(r,n,o,s){var a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=moment(s).format("YYYY-MM-DDTHH:mm:ss"),c=t.defer();return e.get(serviceBase+"odata/delays/details/source/"+r+"/"+n+"/?from="+a+"&to="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},ut=function(r,n,o,s){var a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=moment(s).format("YYYY-MM-DDTHH:mm:ss"),c=t.defer();return e.get(serviceBase+"odata/delays/details/register/"+r+"/"+n+"/?from="+a+"&to="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},ft=function(r,n,o,s){var a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=moment(s).format("YYYY-MM-DDTHH:mm:ss"),c=t.defer();return e.get(serviceBase+"odata/delays/details/route/"+r+"/"+n+"/?from="+a+"&to="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},dt=function(r){var n=t.defer();return e.get(serviceBase+"odata/fdp/children/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},gt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/fdp/notify/"+r,null).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},lt=function(r){var n=t.defer();return e.get(serviceBase+"odata/crew/fdp/assigned/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/fights/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},vt=function(r,n){var o=serviceBase+"odata/flight/crews/"+r;1==n&&(o=serviceBase+"odata/flight/crews/archive/"+r);var s=t.defer();return e.get(o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},pt=function(r){var n=t.defer();return e.get(serviceBase+"odata/flight/fdps/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},mt=function(r){var n=t.defer();return e.get(serviceBase+"odata/jldata/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},ht=function(r){var n=t.defer();return e.get(serviceBase+"odata/cldata/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Mt=function(r){var n=t.defer();return e.get(serviceBase+"odata/jldata/legs/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},xt=function(r){var n=t.defer();return e.get(serviceBase+"odata/cldata/legs/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Et=function(r){var n=t.defer();return e.get(serviceBase+"odata/line/flights/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},jt=function(r){var n=t.defer();return e.get(serviceBase+"odata/fdps/reporting/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},yt=function(r,n,o){var s="odata/fdps/cockpit/"+n+"/"+o;r||(s="odata/fdps/cabin/"+n+"/"+o);var a=t.defer();return e.get(serviceBase+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},Bt=function(r,n,o){var s=t.defer();return e.get(serviceBase+"odata/crew/assign/valid/"+r+"/"+n+"/"+o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},Ut=function(r,n,o){var s=t.defer();return e.get(serviceBase+"odata/fdp/assign/valid/"+r+"/"+n+"/"+o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},Dt=function(r,n,o,s){var a=t.defer();return e.get(serviceBase+"odata/fdp/assign/valid/"+r+"/"+n+"/"+o+"/"+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},Yt=function(r,n,o){var s=t.defer();return e.get(serviceBase+"odata/fdp/crew/"+r+"/"+n+"/"+o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},wt=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/fdp/"+r+"/"+n+"?$orderby=DutyStart").then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},kt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/assign/fdp",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},St=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crews/assign/fdp",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ft=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/assign/fdp2",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Tt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/assign/fdp2/detail",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ct=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/crew/assign/fdp/position",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Pt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/fdp/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},bt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/duty/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Rt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/duty/save/detail",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},At=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/fdp/isrerrpvalid/"+r+"?start="+s+"&end="+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},It=function(r,n,o,s){var a=moment(n).format("YYYY-MM-DDTHH:mm:ss"),i=moment(o).format("YYYY-MM-DDTHH:mm:ss"),c=t.defer();return e.get(serviceBase+"odata/fdp/isevent/"+r+"/"+s+"?start="+a+"&end="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},Ht=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/aog/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},$t=function(r){var n=t.defer();return e.get(serviceBase+"odata/aogs/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Nt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/aog/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Lt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/routes/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},zt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/routes/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},qt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/delaycodes/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Ot=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/delaycodes/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},_t=function(r){var n=t.defer();return e.get(serviceBase+"odata/flights/delaycodes/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Gt=function(r){var n=t.defer();return e.get(serviceBase+"odata/roster/daily/crew?date="+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Vt=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/roster/daily/crew/flight/"+n+"?date="+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Jt=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flight/report/security?dt="+n+"&df="+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Kt=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/flight/report/security/dh?dt="+n+"&df="+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Qt=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/notify/roster/daily/",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Wt=function(r,n,o,s){var a=t.defer();return e.get(serviceBase+"odata/board/summary/"+r+"/"+n+"/"+o+"/"+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},Xt=function(r,n,o,s,a,i,c){var u=t.defer();return e.get(serviceBase+"odata/board/summary/total/"+r+"/"+n+"/"+o+"/"+s+"/"+a+"/"+i+"/"+c).then(function(e){u.resolve(e.data)},function(e,t){u.reject(Exceptions.getMessage(e))}),u.promise},Zt=function(r,o,s){var a=t.defer();return e.post(n.serviceUrl+"odata/roster/method?df="+o+"&dt="+s,r).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},er=function(r,o,s){var a=t.defer();return e.post(n.serviceUrl+"odata/roster/method/duty?df="+o+"&dt="+s,r).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},tr=function(r,o,s,a){var i=t.defer();return e.post(n.serviceUrl+"odata/roster/method/temp?df="+o+"&dt="+s+(a?"&crewId="+a:""),r).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},rr=function(r,o,s,a){var i=t.defer();return e.post(n.serviceUrl+"odata/roster/prepost?df="+o+"&dt="+s+(a?"&crewId="+a:""),r).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},nr=function(r,o,s,a,i,c){var u=t.defer();return e.post(n.serviceUrl+"odata/roster/method/temp/cal?df="+o+"&dt="+s+(a?"&crewId="+a:"")+"&year="+i+"&month="+c,r).then(function(e){u.resolve(e.data)},function(e,t){u.reject(Exceptions.getMessage(e))}),u.promise},or=function(r,o,s){var a=t.defer();return e.post(n.serviceUrl+"odata/roster/method/duties?df="+o+"&dt="+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},sr=function(r,o,s,a,i){var c=t.defer();return e.post(n.serviceUrl+"odata/roster/method/stbys?df="+o+"&dt="+s+"&loc="+a+"&time="+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},ar=function(r,o,s){var a=t.defer();return e.post(n.serviceUrl+"odata/roster/method/validate?df="+o+"&dt="+s,r).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},ir=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/roster/sheet?dt="+n+"&df="+r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},cr=function(r){var n=t.defer();return e.get(serviceBase+"odata/crew/valid/1").then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},ur=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/roster/crew/valid/1?dt="+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},fr=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/ftl/crew/"+r+"?dt="+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},dr=function(r){var n=t.defer();return e.get(serviceBase+"odata/crew/dutyflight?df="+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},gr=function(r,n){n||(n=0);var o=t.defer();return e.get(serviceBase+"odata/fdp/stat/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},lr=function(r,n,o,s,a){var i=t.defer();return e.get(serviceBase+"odata/stby/ceased/stat/"+r+"/"+n+"/"+o+"/"+s+"/"+a).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},vr=function(){var r=t.defer();return e.get(serviceBase+"odata/delete/keys").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},pr=function(r){var n=t.defer();return e.get(serviceBase+"odata/crew/flights?dt="+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},mr=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/fdps/off",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},hr=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/stby/activate",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},Mr=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/stby/activate/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},xr=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/stby/activated/list?dt="+r+"&df="+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.deleteActivateStby=Mr,o.getActivatedStbys=xr,o.fdpsOff=mr,o.activateStby=hr,o.getCrewsFlights=pr,o.deleteKeys=vr,o.getFDPStats=gr,o.checkStbyActivation=lr,o.getCrewForRoster=cr,o.getCrewForRosterByDate=ur,o.getCrewFTLByDate=fr,o.getCrewDutyFlight=dr,o.getDelayCodes=p,o.getDelayCodeCats=m,o.getFlightDelayCodes=h,o.getFlightDelays=M,o.getAverageRouteTime=u,o.getFlights=f,o.getBoxFlights=d,o.getFlightPlan=b,o.getFlightPlanItem=R,o.getPlanItemBoard=A,o.checkOverlap=N,o.getFlightPlanItems=L,o.getFlightsGantt=k,o.getFlightsGantt2=S,o.getFlightsGanttByFlights=F,o.getFlightPlanGantt=P,o.savePlanItems=ve,o.makePlanEditable=pe,o.getFlightPlanItemPermits=z,o.getFlightPlanCrew=q,o.getFlightPlanCrewBox=O,o.getBoxCrew=_,o.getFlightCrew2=G,o.getCrewFlights=V,o.getCrewFlightsTotal=J,o.getCrewSummary=K,o.getCrew=Q,o.getFlightPlanPermits=X,o.getFlightPermits=Z,o.savePlanItem=he,o.updatePlanItemFlight=Me,o.savePlanItemBoard=xe,o.deleteFlightPlanCrew=ye,o.deleteFlight=Be,o.deleteBoxCrew=Ue,o.deletePlanItem=Ee,o.deletePlanItemBoard=je,o.deletePlanItemPermit=Ye,o.deletePlanRegister=De,o.lockPlanRegister=Se,o.unlockPlanRegister=Fe,o.savePlan=Ie,o.savePlanRegisters=we,o.savePlanRegister=ke,o.savePlanInterval=Te,o.approvePlanRegisters=Ce,o.applyPlanCalander=Pe,o.offFlights=ae,o.boxItems=ie,o.createFDP=ce,o.unboxItems=ue,o.saveFlightPlanCrew=se,o.saveCrewCalendar=oe,o.saveFlightDep=He,o.saveFlightLog=$e,o.saveFlightDelays=Ne,o.saveFlightArr=Le,o.saveFlightOffBlock=ze,o.saveReportingTime=qe,o.saveFlightTakeOff=_e,o.saveFlightLanding=Ge,o.saveFlightOnBlock=Oe,o.saveFlightPax=Qe,o.saveFlightCargo=We,o.saveFlightFuelArrival=Xe,o.saveFlightFuelDeparture=Ze,o.saveFlightPlanItemPermit=me,o.getAirportByIATA=c,o.getUpdatedFlights=x,o.getRoutes=s,o.getRouteDestination=i,o.closePlan=be,o.getFlightPlanView=I,o.approvePlan60=Re,o.approvePlan70=Ae,o.getFlightPlanAssignedRegisters=$,o.getFlightPlanSummary=H,o.saveFlight=fe,o.getFlightsAbnormal=ee,o.getOverDuty=ne,o.getRestValidation=re,o.getRestDayOffCheck=te,o.saveFlightCancel=Ve,o.saveFlightRamp=Je,o.saveFlightRedirect=Ke,o.getRoute=a,o.getFlight=C,o.saveFlightRegister=de,o.saveFlightAppy=le,o.getFlightsGrouped=l,o.checkPlanErrors=g,o.getFlightsByRegister=v,o.getPlanBase=E,o.getPlanItemsGantt=j,o.getPlanItemsGanttCrewTest=y,o.getPlanItemsGanttCrewAssignReg=B,o.getFlights=f,o.getPlanLastItem=U,o.getPlanLastItemByPlan=D,o.getPlanItems=Y,o.getPlanItemsById=w,o.saveFlightRegisterChange=ge,o.getCockpitPositions=tt,o.getCabinPositions=et,o.getDelaysTotalByCode=rt,o.getDelaysTotalBySource=ot,o.getDelaysTotalByRegister=st,o.getDelaysTotalByRoute=at,o.getDelaysDetailsByCode=it,o.getDelaysDetailsBySource=ct,o.getDelaysDetailsByRegister=ut,o.getDelaysDetailsByRoute=ft,o.getValidCrew=Bt,o.getValidFDP=Ut,o.getFDPAssignedCrew=lt,o.saveAssignFDPToCrew=kt,o.saveAssignFDPToCrews=St,o.saveAssignFDPToCrew2=Ft,o.saveAssignFDPToCrew2Detail=Tt,o.saveUpdateFDPPosition=Ct,o.saveDeleteFDP=Pt,o.getCrewFDPByYearMonth=Yt,o.getFDPsByYearMonth=wt,o.IsRERRPValid=At,o.IsEventValid=It,o.saveDuty=bt,o.saveDutyDetail=Rt,o.getCrewGrouped=W,o.getFDPs=yt,o.getFlightFDPs=pt,o.getFlightCrews=vt,o.getValidFDPDay=Dt,o.getFDPChildren=dt,o.notifyFDPCrew=gt,o.getJLData=mt,o.getCLData=ht,o.getJLDataLegs=Mt,o.getCLDataLegs=xt,o.getFlightsLine=Et,o.getReporting=jt,o.saveAog=Ht,o.getAogs=$t,o.saveDeleteAog=Nt,o.saveRoute=Lt,o.deleteRoute=zt,o.saveDelayCode=qt,o.deleteDelayCode=Ot,o.getDelayCode=_t,o.getDailyRosterCrew=Gt,o.getDailyRosterFlights=Vt,o.notifyDailyRoster=Qt,o.getBoardSummary=Wt,o.getBoardSummaryTotal=Xt,o.getSecurityRoster=Jt,o.getSecurityRosterDH=Kt,o.getSummary=nt,o.getPlanGantt=T,o.roster=Zt,o.rosterDuty=er,o.rosterValidate=ar,o.rosterTemp=tr,o.rosterTempCal=nr,o.rosterPrePost=rr,o.rosterDuties=or,o.rosterSTBYs=sr,o.getRosterSheet=ir,o}]),app.factory("tokensManagerService",["$http","ngAuthSettings",function(e,t){var r=t.apiServiceBaseUri,n={},o=function(){return e.get(r+"api/refreshtokens").then(function(e){return e})},s=function(t){return e.delete(r+"api/refreshtokens/?tokenid="+t).then(function(e){return e})};return n.deleteRefreshTokens=s,n.getRefreshTokens=o,n}]),app.factory("activityService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/dashboard/total/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},a=function(r,n,o,s){var a=t.defer();return e.get(serviceBase+"odata/menuhits/top/"+r+"/"+n+"/"+o+"/"+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},i=function(r,n,o,s){var a=t.defer();return e.get(serviceBase+"odata/useractivities/top/"+r+"/"+n+"/"+o+"/"+s).then(function(e){a.resolve(e.data)},function(e,t){a.reject(Exceptions.getMessage(e))}),a.promise},c=function(r,n){var o=moment(n).format("YYYY-MM-DDTHH:mm:ss"),s=t.defer();return e.get(serviceBase+"odata/dashboard/flight/"+r+"?date="+o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise},u=function(){var r=t.defer();return e.get(serviceBase+"odata/airports/all?$filter=CountryId eq 103 and IATA ne '-'").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/useractivities/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},d=function(e,t,r){var o={Id:-1,Date:null,UserId:n.userId,Key:e,Url:t,ModuleId:n.moduleId,IsMain:1,CustomerId:Config.CustomerId,Remark:r};f(o)};return o.getIRAirports=u,o.save=f,o.hitMenu=d,o.getMenuHits=a,o.getLastActivities=i,o.getDashboard=s,o.getFlightsSummary=c,o}]),app.factory("notificationService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r){var n=t.defer();return e.get(serviceBase+"odata/notification/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},a=function(r,n,o,s,a,i){var c=t.defer();return e.get(serviceBase+"odata/notify/delay2/"+r+"/"+n+"/"+o+"/"+s+"/"+a+"/"+i).then(function(e){c.resolve(e.data)},function(e,t){c.reject(Exceptions.getMessage(e))}),c.promise},i=function(r){r.SenderId=n.userId;var o=t.defer();return e.post(n.serviceUrl+"odata/notifications/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},c=function(r){r.SenderId=n.userId;var o=t.defer();return e.post(n.serviceUrl+"odata/notifications/save2",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},u=function(r,n){var o={username:"9125591790",password:"@khavaN559",to:n,from:"30001223136323",text:r},s=t.defer();return e.post("https://rest.payamak-panel.com/api/SendSMS/SendSMS",o).then(function(e){s.resolve(e.data)},function(e,t){s.reject(Exceptions.getMessage(e))}),s.promise};return o.notify=i,o.notify2=c,o.getNotification=s,o.sms=u,o.delayNotification=a,o}]),app.factory("courseService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r){var n=t.defer();return e.get(serviceBase+"odata/course/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},a=function(r){var n=t.defer();return e.get(serviceBase+"odata/course/active/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},i=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/activecourses/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},c=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/certificates/last/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},u=function(r){var n=t.defer();return e.get(serviceBase+"odata/employees/certificates/all/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/courses/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},d=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/courses/types/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},g=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/certifications/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},l=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/certifications/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},v=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/courses/types/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},p=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/courses/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},m=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/course/active/changeStatus",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getCourse=s,o.getActiveCourse=a,o.getPersonActiveCourse=i,o.getPersonLastCertificates=c,o.getPersonAllCertificates=u,o.save=f,o.saveType=d,o.saveCertificate=g,o.changeStatus=m,o.delete=p,o.deleteCertificate=l,o.deleteCourseType=v,o}]),app.factory("jobgroupService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(t){return e.get(serviceBase+"odata/base/jobgroups/"+t).then(function(e){return e})},a=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/jobgroups/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/base/jobgroups/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getGroups=s,o.save=a,o.delete=i,o}]),app.factory("statService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r,n,o){var s=moment(n).format("YYYY-MM-DDTHH:mm:ss"),a=moment(o).format("YYYY-MM-DDTHH:mm:ss"),i=t.defer();return e.get(serviceBase+"odata/report/delay/daily/"+r+"?dt="+a+"&df="+s).then(function(e){i.resolve(e.data)},function(e,t){i.reject(Exceptions.getMessage(e))}),i.promise},a=function(r){var n=t.defer();return e.get(serviceBase+"odata/report/delay/yearly/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise};return o.getDelayStat=s,o.getDelayStatYearly=a,o}]),app.factory("aircraftService",["$http","$q","ngAuthSettings","$rootScope",function(e,t,r,n){var o={},s=function(r){var n=t.defer();return e.get(serviceBase+"odata/aircrafts/customer/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},a=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/aircrafts/customer/type/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},i=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/aircrafts/customer/virtual/type/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},c=function(r,n){var o=t.defer();return e.get(serviceBase+"odata/aircrafts/available/customer/type/"+r+"/"+n).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},u=function(r){var n=t.defer();return e.get(serviceBase+"odata/aircrafttypes/all/").then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},f=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/airports/save",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise},d=function(r){var o=t.defer();return e.post(n.serviceUrl+"odata/airports/delete",r).then(function(e){o.resolve(e.data)},function(e,t){o.reject(Exceptions.getMessage(e))}),o.promise};return o.getAircraftTypes=u,o.getMSNs=s,o.getVirtualMSNsByType=i,o.getMSNsByType=a,o.getAvailableMSNsByType=c,o.save=f,o.delete=d,o}]),app.factory("authService",["$http","$q","localStorageService","ngAuthSettings","$location","$rootScope",function(e,t,r,n,o,s){var a=n.apiServiceBaseUri,i={},c={isAuth:!1,userName:"",useRefreshTokens:!1},u={provider:"",userName:"",externalAccessToken:""},f=function(t){return l(),e.post(a+"api/account/register",t).then(function(e){return e})},d=function(){var e=r.get("ceo");if(e){return{userName:"ceo",password:e.Password}}return null},g=function(o){console.log("_login"),console.log(a);var i="grant_type=password&username="+o.userName+"&password="+o.password+"&scope="+o.scope;o.useRefreshTokens&&(i=i+"&client_id="+n.clientId);var u=t.defer();return e.post(a+"token",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("token"),console.log(e);var t=e.data;o.useRefreshTokens?r.set("authorizationData",{token:t.access_token,userName:o.userName,refreshToken:t.refresh_token,expires:t[".expires"],useRefreshTokens:!0}):r.set("authorizationData",{token:t.access_token,userName:o.userName,refreshToken:"",expires:t[".expires"],useRefreshTokens:!1}),r.set("userData",{Name:t.Name,UserId:t.UserId,EmployeeId:t.EmployeeId,Roles:t.Roles,roleClaims:t.RoleClaims,EmailConfirmed:t.EmailConfirmed}),"ceo"==o.userName&&r.set("ceo",{userName:"ceo",Password:o.password}),c.isAuth=!0,c.userName=o.userName,c.useRefreshTokens=o.useRefreshTokens,s.userName=o.userName,s.userTitle=t.Name,s.userId=t.UserId,s.employeeId=t.EmployeeId,s.roles=t.Roles?t.Roles.split(","):[],s.roleClaims=t.RoleClaims?t.RoleClaims.split(","):[],s.EmailConfirmed=t.EmailConfirmed,s.claims=Enumerable.From(s.roleClaims).Select(function(e){var t=e.split("-");return{module:t[0],page:t[1],action:t.length>2?t[2]:null}}).ToArray(),u.resolve(e)},function(e,t){l(),u.reject(e)}),u.promise},l=function(){r.remove("authorizationData"),r.remove("userData"),c.isAuth=!1,c.userName="",c.useRefreshTokens=!1,o.path("/login")},v=function(){var e=r.get("authorizationData");if(e){c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=e.useRefreshTokens,s.userName=e.userName;var t=r.get("userData");t&&(s.userTitle=t.Name,s.userId=t.UserId,s.employeeId=t.EmployeeId,s.roles=t.Roles?t.Roles.split(","):[],s.roleClaims=t.roleClaims?t.roleClaims.split(","):[],s.EmailConfirmed=t.EmailConfirmed,s.claims=Enumerable.From(s.roleClaims).Select(function(e){var t=e.split("-");return{module:t[0],page:t[1],action:t.length>2?t[2]:null}}).ToArray())}},p=function(){var o=t.defer(),s=r.get("authorizationData");if(s&&s.useRefreshTokens){var i="grant_type=refresh_token&refresh_token="+s.refreshToken+"&client_id="+n.clientId;r.remove("authorizationData"),e.post(a+"token",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var t=e.data;console.log("refresh"),console.log(t),r.set("authorizationData",{token:t.access_token,userName:t.userName,refreshToken:t.refresh_token,useRefreshTokens:!0}),o.resolve(e)},function(e,t){l(),o.reject(e)})}return o.promise},m=function(n){var o=t.defer();return e.get(a+"api/account/ObtainLocalAccessToken",{params:{provider:n.provider,externalAccessToken:n.externalAccessToken}}).success(function(e){r.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=!1,o.resolve(e)}).error(function(e,t){l(),o.reject(e)}),o.promise},h=function(n){var o=t.defer();return e.post(a+"api/account/registerexternal",n).success(function(e){r.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=!1,o.resolve(e)}).error(function(e,t){l(),o.reject(e)}),o.promise},M=function(){var e=r.get("authorizationData");if(!e)return!1;var t=new Date(e.expires);return!(new Date>t)},x=function(){r.remove("authorizationData"),o.path("/login")},E=function(){var e=r.get("authorizationData");if(!e)return r.remove("authorizationData"),void o.path("/login");var t=new Date(e.expires);return new Date>t?(alert("expire"),r.remove("authorizationData"),void o.path("/login")):void 0},j=function(e){var t={id:Number(e)};switch(Number(e)){case 1:t.title="Base Pocket",t.remark="Lorem ipsum dolor sit amet",t.theme="material.steel-light",t.color="#2f7899",t.class="theme-steel";break;case 2:t.title="Learning Pocket",t.remark="Lorem ipsum dolor sit amet",t.theme="material.purple-light",t.color="#9C27B0",t.class="theme-purple";break;case 3:t.title="Flight Pocket",t.remark="Lorem ipsum dolor sit amet",t.theme="material.blue-light",t.color="#03A9F4",t.class="theme-blue";break;case 4:t.title="Basic Information",t.remark="Lorem ipsum dolor sit amet",t.theme="material.gray-light",t.color="#97a1a6",t.class="theme-gray"}return t},y=function(){var e=r.get("module");e&&(s.module=e.title,s.moduleId=e.id,s.moduleRemark=e.remark,s.theme=e.theme,s.color=e.color,s.class=e.class)},B=function(e){var t=j(e);r.set("module",t),y()},U=function(r){var n=t.defer();return e.post(s.serviceUrl+"api/Account/ChangePassword",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},D=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/users/register",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},Y=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/users/password",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},w=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/users/update",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},k=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/users/delete",r).then(function(e){n.resolve(e.data)},function(e,t){
n.reject(Exceptions.getMessage(e))}),n.promise},S=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/user/roles/add",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},F=function(r){var n=t.defer();return e.post(s.serviceUrl+"odata/user/roles/remove",r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},T=function(){var r=t.defer();return e.get(a+"odata/users").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},C=function(){var r=t.defer();return e.get(a+"odata/roles").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},P=function(){var r=t.defer();return e.get(a+"odata/claims").then(function(e){r.resolve(e.data)},function(e,t){r.reject(Exceptions.getMessage(e))}),r.promise},b=function(r){var n=t.defer();return e.get(a+"odata/role/claims/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},R=function(r){var n=t.defer();return e.get(a+"odata/user/claims/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise},A=function(r){var n=t.defer();return e.get(a+"odata/user/roles/"+r).then(function(e){n.resolve(e.data)},function(e,t){n.reject(Exceptions.getMessage(e))}),n.promise};return i.setModule=B,i.fillModuleData=y,i.checkAuth=E,i.isAuthorized=M,i.redirectToLogin=x,i.saveRegistration=f,i.login=g,i.logOut=l,i.fillAuthData=v,i.authentication=c,i.refreshToken=p,i.obtainAccessToken=m,i.externalAuthData=u,i.registerExternal=h,i.IsAuthurized=function(){return i.authentication.isAuth},i.changePassword=U,i.getCEO=d,i.getUsers=T,i.getUserRoles=A,i.getRoles=C,i.addUserRole=S,i.removeUserRole=F,i.register2=D,i.updateUser=w,i.deleteUser=k,i.setPassword=Y,i.getClaims=P,i.getRoleClaims=b,i.getUserClaims=R,i}]);